<!DOCTYPE html>
<html lang="en" ng-app="vmsApp">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VMS - Navigation</title>

    <!-- CSS Imports -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/cameras.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/alerts.css">
    <link rel="stylesheet" href="css/multiview.css">
    <link rel="stylesheet" href="css/issue-details.css">
    <link rel="stylesheet" href="css/issue-details.css">
    <link rel="stylesheet" href="css/alert-details.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/nura-ai.css">
    <link rel="stylesheet" href="css/live-view.css">
    <link rel="stylesheet" href="css/playback.css">
    <link rel="stylesheet" href="css/search.css">


    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
</head>

<body class="light-theme" ng-controller="MainController">

    <div class="app-container">

        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <div class="logo-container">
                    <img ng-src="{{ theme === 'dark' ? 'assets/logo-dark.png' : 'assets/logo.png' }}" alt="NURAEYE VMS"
                        style="height: 100px; width: auto;">
                    <span style="display:none;">NURAEYE VMS</span>
                </div>
            </div>

            <div class="header-right" style="display: flex; align-items: center; gap: 24px;">
                <!-- Alerts Icon -->
                <div class="icon-badge-container">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <div class="badge">3</div>
                </div>

                <!-- Theme Toggle -->
                <div class="icon-badge-container" ng-click="toggleTheme()" title="Toggle Theme">
                    <svg ng-if="theme === 'light'" width="22" height="22" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg ng-if="theme === 'dark'" width="22" height="22" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </div>

                <!-- User Profile -->
                <div class="user-profile" style="position: relative;" ng-click="toggleUserDropdown($event)">
                    <div class="avatar">{{ user.initials }}</div>
                    <div class="user-info">
                        <span class="user-name">{{ user.name }}</span>
                        <span class="user-role">{{ user.role }}</span>
                    </div>

                    <!-- Dropdown -->
                    <div class="dropdown-menu" ng-class="{ 'show': isUserDropdownOpen }">
                        <a href="" class="dropdown-item" ng-click="navigateTo('profile')">{{ translations.nav.profile ||
                            "Profile" }}</a>
                        <a href="" class="dropdown-item" ng-click="navigateTo('settings')">Settings</a>
                        <a href="#" class="dropdown-item" style="color: var(--danger-color);">{{ translations.nav.logout
                            || "Logout" }}</a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <nav class="app-sidebar">
            <ul class="nav-list">

                <li class="nav-item" ng-class="{ 'active': activePage === 'dashboard' }"
                    ng-click="navigateTo('dashboard')">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span class="nav-text">{{ translations.nav.dashboard || 'Dashboard' }}</span>
                </li>

                <li class="nav-item" ng-class="{ 'active': activePage === 'cameras' }" ng-click="navigateTo('cameras')">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z">
                        </path>
                        <circle cx="12" cy="13" r="4"></circle>
                    </svg>
                    <span class="nav-text">{{ translations.nav.cameras || 'Cameras' }}</span>
                </li>

                <li class="nav-item" ng-class="{ 'active': activePage === 'alerts' }" ng-click="navigateTo('alerts')">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <line x1="12" y1="16" x2="12.01" y2="16"></line>
                    </svg>
                    <span class="nav-text">{{ translations.nav.alerts || 'Alerts' }}</span>
                </li>

                <li class="nav-item" ng-class="{ 'active': activePage === 'multiview' }"
                    ng-click="navigateTo('multiview')">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="20" rx="2" ry="2"></rect>
                        <line x1="12" y1="2" x2="12" y2="22"></line>
                        <line x1="2" y1="12" x2="22" y2="12"></line>
                    </svg>
                    <span class="nav-text">{{ translations.nav.multiview || 'Multiview' }}</span>
                </li>

                <li class="nav-item" ng-class="{ 'active': activePage === 'settings' }"
                    ng-click="navigateTo('settings')">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                    <span class="nav-text">{{ translations.nav.settings || 'Settings' }}</span>
                </li>

                <li class="nav-item" ng-class="{ 'active': activePage === 'search-nura-ai' }"
                    ng-click="navigateTo('search-nura-ai')">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path
                            d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">
                        </path>
                    </svg>
                    <span class="nav-text">{{ translations.nav.nura_ai || 'Nura AI' }}</span>
                </li>

                <li class="nav-item" ng-class="{ 'active': activePage === 'search-object' }"
                    ng-click="navigateTo('search-object')">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                    </svg>
                    <span class="nav-text">{{ translations.nav.search || 'Search' }}</span>
                </li>

            </ul>
        </nav>

        <!-- Main Content -->
        <main class="app-main">

            <!-- Dashboard View -->
            <div class="dashboard-grid" ng-controller="DashboardController" ng-show="activePage === 'dashboard'">

                <!-- Loading / Error States -->
                <div class="dashboard-loading" ng-if="isLoading"
                    style="grid-column: 1/-1; text-align: center; padding: 20px;">
                    Loading Dashboard...
                </div>
                <div class="dashboard-error" ng-if="error"
                    style="grid-column: 1/-1; text-align: center; padding: 20px; color: red;">
                    {{ error }}
                </div>

                <!-- Zone 1: Camera Summary -->
                <section class="dashboard-zone" id="zone-1" ng-if="!isLoading && !error">
                    <div class="zone-header">
                        <span class="zone-title">{{ translations.dashboard.camera_summary || 'Camera Summary' }}</span>
                        <div class="zone-actions" title="Configure Zone"
                            ng-click="openSettings('zone-1', 'Camera Summary')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path
                                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>
                        </div>
                    </div>
                    <div class="zone-content camera-summary-grid">
                        <div class="widget-card" ng-if="widgetConfig.zone1.total">
                            <div class="widget-value" style="color: var(--accent-color);">{{ data.cameraSummary.total }}
                            </div>
                            <div class="widget-label">{{ translations.dashboard.total_cameras || 'Total Cameras' }}
                            </div>
                        </div>
                        <div class="widget-card" ng-if="widgetConfig.zone1.online">
                            <div class="widget-value" style="color: var(--success-color);">{{ data.cameraSummary.online
                                }}</div>
                            <div class="widget-label">{{ translations.dashboard.online || 'Online' }}</div>
                        </div>
                        <div class="widget-card" ng-if="widgetConfig.zone1.offline">
                            <div class="widget-value" style="color: var(--danger-color);">{{ data.cameraSummary.offline
                                }}</div>
                            <div class="widget-label">{{ translations.dashboard.offline || 'Offline' }}</div>
                        </div>
                        <div class="widget-card" ng-if="widgetConfig.zone1.recording">
                            <div class="widget-value" style="color: var(--text-primary);">{{
                                data.cameraSummary.recording }}</div>
                            <div class="widget-label">{{ translations.dashboard.recording || 'Recording' }}</div>
                        </div>
                    </div>
                </section>

                <!-- Zone 2: System & Storage -->
                <section class="dashboard-zone" id="zone-2" ng-if="!isLoading && !error">
                    <div class="zone-header">
                        <span class="zone-title">{{ translations.dashboard.system_storage || 'System & Storage'
                            }}</span>
                        <div class="zone-actions" title="Configure Zone"
                            ng-click="openSettings('zone-2', 'System & Storage')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path
                                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>
                        </div>
                    </div>
                    <div class="zone-content">

                        <div style="margin-bottom: var(--spacing-md)" ng-if="widgetConfig.zone2.storage">
                            <div style="display:flex; justify-content:space-between; margin-bottom: 4px;">
                                <span class="widget-label">{{ translations.dashboard.storage_usage || 'Storage Usage'
                                    }}</span>
                                <span style="font-weight:600; font-size:12px;">{{ data.systemStatus.storageUsage
                                    }}%</span>
                            </div>
                            <div style="height:6px; background: var(--bg-hover); border-radius:3px; overflow:hidden;">
                                <div ng-style="{ 'width': data.systemStatus.storageUsage + '%' }"
                                    style="height:100%; background: var(--accent-color);"></div>
                            </div>
                            <div style="font-size:10px; color:var(--text-muted); margin-top:4px;">{{
                                data.systemStatus.retentionDays }} {{ translations.dashboard.days_retention || 'Days
                                Retention Remaining' }}</div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md); margin-top: auto;"
                            ng-if="widgetConfig.zone2.cpu || widgetConfig.zone2.memory">
                            <div class="widget-card" style="padding: var(--spacing-sm);" ng-if="widgetConfig.zone2.cpu">
                                <div style="font-size: 16px; font-weight:700;">{{ data.systemStatus.cpuLoad }}%</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">{{
                                    translations.dashboard.cpu_load || 'CPU Load' }}</div>
                            </div>
                            <div class="widget-card" style="padding: var(--spacing-sm);"
                                ng-if="widgetConfig.zone2.memory">
                                <div style="font-size: 16px; font-weight:700;">{{ data.systemStatus.memoryUsage }}%
                                </div>
                                <div style="font-size: 10px; color: var(--text-secondary);">{{
                                    translations.dashboard.memory || 'Memory' }}</div>
                            </div>
                        </div>

                        <div style="margin-top: var(--spacing-md); display:flex; align-items:center; gap:8px;"
                            ng-if="widgetConfig.zone2.server">
                            <span style="width:8px; height:8px; border-radius:50%;"
                                ng-style="{'background-color': data.systemStatus.serverStatus === 'Healthy' ? 'var(--success-color)' : 'var(--danger-color)'}"></span>
                            <span style="font-size:12px; font-weight:600;">{{ translations.dashboard.server_status ||
                                'Server Status' }}: {{
                                data.systemStatus.serverStatus }}</span>
                            <span style="font-size:10px; color:var(--text-muted); margin-left:auto;">{{
                                translations.dashboard.uptime || 'Uptime' }}: {{
                                data.systemStatus.uptime }}</span>
                        </div>
                    </div>
                </section>

                <!-- Zone 3: Camera Status -->
                <section class="dashboard-zone" id="zone-3" ng-if="!isLoading && !error">
                    <div class="zone-header">
                        <span class="zone-title">{{ translations.dashboard.camera_issues || 'Camera Issues' }}</span>
                        <div class="zone-actions" title="Configure Zone"
                            ng-click="openSettings('zone-3', 'Camera Issues')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path
                                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>
                        </div>
                    </div>
                    <div class="zone-content">
                        <div ng-if="!widgetConfig.zone3.issues" style="text-align:center; color:var(--text-muted);">
                            Widget Hidden</div>

                        <div ng-if="widgetConfig.zone3.issues && data.cameraIssues.length === 0"
                            style="text-align:center; color:var(--text-muted); padding:20px;">{{
                            translations.dashboard.no_issues || 'No Issues Found' }}</div>

                        <div ng-if="widgetConfig.zone3.issues" ng-repeat="cam in data.cameraIssues"
                            class="widget-list-item" ng-click="resolveIssue(cam)" style="cursor: pointer;"
                            ng-class="{'critical': cam.status === 'Offline', 'warning': cam.status !== 'Offline'}">
                            <div style="display:flex; flex-direction:column;">
                                <span style="font-weight:600;">{{ cam.name }}</span>
                                <span style="font-size:10px; color:var(--text-muted);">{{ cam.location }}</span>
                            </div>
                            <div style="text-align:right;">
                                <div style="font-size:11px; font-weight:600;"
                                    ng-style="{'color': cam.status === 'Offline' ? 'var(--danger-color)' : 'var(--warning-color)'}">
                                    {{ cam.status }}</div>
                                <div style="font-size:10px; color:var(--text-muted);">{{ cam.time }}</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Zone 4: Alerts -->
                <section class="dashboard-zone" id="zone-4" ng-if="!isLoading && !error">
                    <div class="zone-header">
                        <span class="zone-title">{{ translations.dashboard.active_alerts || 'Active Alerts' }}</span>
                        <div class="zone-actions" title="Configure Zone"
                            ng-click="openSettings('zone-4', 'Active Alerts')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path
                                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>
                        </div>
                    </div>
                    <div class="zone-content">
                        <div ng-if="!widgetConfig.zone4.alerts" style="text-align:center; color:var(--text-muted);">
                            Widget Hidden</div>

                        <div ng-if="widgetConfig.zone4.alerts" ng-repeat="alert in data.alerts" class="widget-list-item"
                            ng-style="{'border-left': '3px solid ' + getSeverityColor(alert.severity)}"
                            ng-click="openAlertDetails(alert)" style="cursor: pointer;">
                            <div style="display:flex; flex-direction:column;">
                                <span style="font-weight:600;">{{ alert.type }}</span>
                                <span style="font-size:10px; color:var(--text-muted);">{{ alert.location }}</span>
                            </div>
                            <div style="text-align:right;">
                                <span
                                    style="font-size:10px; background:var(--bg-hover); padding:2px 6px; border-radius:4px;">{{
                                    alert.severity }}</span>
                                <div style="font-size:10px; color:var(--text-muted); margin-top:2px;">{{ alert.time }}
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Widget Settings Modal -->
                <div id="settings-modal" class="modal-overlay" ng-class="{'open': settingsModalOpen}">
                    <div class="modal-content">
                        <div class="modal-header">
                            <span class="modal-title">Configure {{ activeZoneTitle }}</span>
                            <span class="modal-close" ng-click="closeSettings()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <div class="widget-toggle-item" ng-repeat="item in tempConfigKeys">
                                <span>{{ item.label }}</span>
                                <label class="switch">
                                    <input type="checkbox" ng-model="tempConfig[item.key]">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" ng-click="closeSettings()">{{ translations.actions.cancel
                                || "Cancel" }}</button>
                            <button class="btn btn-primary" ng-click="saveSettings()">{{ translations.actions.save ||
                                "Save Changes" }}</button>
                        </div>
                    </div>
                </div>

            </div>



            <!-- Alerts View -->
            <div class="alerts-page" ng-controller="AlertsController" ng-show="activePage === 'alerts'">

                <!-- Setup CSS for Alerts (Scoped to this view effectively via classes) -->


                <!-- Filters Bar -->
                <div class="filters-bar" style="flex-wrap: wrap; gap: 12px;">

                    <!-- Search -->
                    <div class="search-container">
                        <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        <input type="text" class="search-input" placeholder="Search alerts..." ng-model="filters.search"
                            ng-change="onFilterChange()">
                    </div>

                    <!-- Status Filter -->
                    <select class="filter-select" ng-model="filters.status" ng-change="onFilterChange()"
                        ng-options="s for s in options.statuses">
                    </select>

                    <!-- Severity Filter -->
                    <select class="filter-select" ng-model="filters.severity" ng-change="onFilterChange()">
                        <option value="">{{ translations.alerts.all_severities || "All Severities" }}</option>
                        <option ng-repeat="s in options.severities" value="{{s}}">{{s}}</option>
                    </select>

                    <!-- Group/Location Filter -->
                    <select class="filter-select" ng-model="filters.location" ng-change="onFilterChange()">
                        <option value="">{{ translations.alerts.all_locations || "All Locations" }}</option>
                        <option ng-repeat="loc in options.locations" value="{{loc}}">{{loc}}</option>
                    </select>

                    <!-- Time Range Filter -->
                    <select class="filter-select" ng-model="filters.timeRange" ng-change="onFilterChange()"
                        ng-options="t.val as t.label for t in options.timeRanges">
                    </select>

                    <!-- Custom Time Range -->
                    <div class="custom-time-inputs" ng-show="filters.timeRange === 'custom'">
                        <input type="datetime-local" ng-model="filters.customStart" ng-change="onFilterChange()">
                        <span>{{ translations.alerts.to || "to" }}</span>
                        <input type="datetime-local" ng-model="filters.customEnd" ng-change="onFilterChange()">
                    </div>

                    <!-- Spacer -->
                    <div style="flex: 1;"></div>

                    <!-- Stats & Actions -->
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div class="stat-badge"
                            style="display:flex; gap:6px; align-items:center; background: rgba(var(--accent-rgb), 0.1); color: var(--accent-color); padding: 6px 10px; border-radius: 4px; font-weight:600; font-size:12px;">
                            <span>{{ stats.unread }}</span> Unread
                        </div>
                        <div class="stat-badge"
                            style="display:flex; gap:6px; align-items:center; background: rgba(211, 47, 47, 0.1); color: var(--danger-color); padding: 6px 10px; border-radius: 4px; font-weight:600; font-size:12px;">
                            <span>{{ stats.critical }}</span> Critical
                        </div>

                        <div style="width:1px; height:20px; background:var(--border-color);"></div>

                        <button class="btn-primary-outline" ng-click="acknowledgeAll()" ng-disabled="stats.unread === 0"
                            style="padding: 6px 12px; font-size: 13px; display: flex; align-items: center; gap: 6px; border: 1px solid var(--accent-color); color: var(--accent-color); background: transparent; border-radius: 4px; cursor: pointer;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                            Ack All
                        </button>
                    </div>

                </div>

                <!-- Alert List -->
                <div class="table-container">
                    <div class="table-content-scroll" style="background: transparent; padding: 0;">

                        <!-- Table Content -->
                        <table class="cameras-table">
                            <thead>
                                <tr>
                                    <th style="width: 100px;">Severity</th>
                                    <th>{{ translations.alerts.alert_type || "Alert Type" }}</th>
                                    <th>{{ translations.alerts.camera || "Camera" }}</th>
                                    <th>{{ translations.alerts.time || "Time" }}</th>
                                    <th style="width: 100px;">{{ translations.alerts.status || "Status" }}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Loading / Empty -->
                                <tr ng-if="isLoading">
                                    <td colspan="5"
                                        style="text-align: center; padding: 20px; color: var(--text-muted);">Loading...
                                    </td>
                                </tr>
                                <tr ng-if="!isLoading && paginatedAlerts.length === 0">
                                    <td colspan="5"
                                        style="text-align: center; padding: 20px; color: var(--text-muted);">No alerts
                                        found.</td>
                                </tr>

                                <!-- Rows -->
                                <tr ng-repeat="alert in paginatedAlerts track by alert.id"
                                    ng-class="{'unviewed': alert.status === 'Unread'}"
                                    ng-click="openAlertDetails(alert)" style="cursor: pointer;">
                                    <td>
                                        <span class="badge-severity"
                                            ng-class="'severity-' + alert.severity.toLowerCase()">{{ alert.severity
                                            }}</span>
                                    </td>
                                    <td>
                                        <div style="font-weight: 500; color: var(--text-primary);">{{ alert.type }}
                                        </div>
                                        <div style="font-size: 11px; color: var(--text-muted); margin-top: 2px;">{{
                                            alert.description }}</div>
                                    </td>
                                    <td>
                                        <div style="font-weight: 500;">{{ alert.cameraName }}</div>
                                        <div style="font-size: 11px; color: var(--text-muted);">{{ alert.location }}
                                        </div>
                                    </td>
                                    <td>
                                        <div style="font-size: 13px;">{{ formatDate(alert.timestamp) }}</div>
                                        <div style="font-size: 11px; color: var(--text-muted);">{{ alert.timeAgo }}
                                        </div>
                                    </td>
                                    <td>
                                        <span class="badge-status" ng-class="alert.status.toLowerCase()">{{ alert.status
                                            }}</span>
                                    </td>
                                    <td style="text-align: center;">
                                        <!-- Action Column Removed -->
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                    </div>

                    <!-- Pagination -->
                    <div class="pagination-bar">
                        <div class="pagination-info">{{ pagination.label }}</div>
                        <div class="pagination-controls">
                            <button class="page-btn" ng-disabled="pagination.currentPage === 1" ng-click="prevPage()">{{
                                translations.actions.previous || "Previous" }}</button>
                            <button class="page-btn"
                                ng-disabled="pagination.currentPage * pagination.itemsPerPage >= pagination.totalItems"
                                ng-click="nextPage()">{{ translations.actions.next || "Next" }}</button>
                        </div>
                    </div>
                </div>

                <!-- Re-use Action Menu for Alerts ?? Or create distinct one? 
                       Cameras Controller handles the popup logic. 
                       Alerts Controller needs IT'S OWN popup logic or we duplicate it.
                       For MVP, let's inject a scoped popup for alerts specifically. -->

                <div class="action-popup" ng-if="activeActionMenu" style="display:block; position:fixed;"
                    ng-style="menuPosition" ng-click="$event.stopPropagation()">

                    <div class="action-item" ng-if="activeActionAlert.status === 'Unread'"
                        ng-click="acknowledge(activeActionAlert); closeActionMenu()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        Acknowledge
                    </div>

                    <div class="action-item"
                        ng-click="handleAction('View Camera', activeActionAlert); closeActionMenu()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z">
                            </path>
                            <circle cx="12" cy="13" r="4"></circle>
                        </svg>
                        View Camera
                    </div>

                    <div class="action-item" ng-if="activeActionAlert.status !== 'Resolved'"
                        ng-click="resolve(activeActionAlert); closeActionMenu()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                            <polyline points="22 4 12 14.01 9 11.01"></polyline>
                        </svg>
                        Resolve
                    </div>

                    <div class="action-item delete" ng-click="delete(activeActionAlert); closeActionMenu()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                            </path>
                        </svg>
                        Delete
                    </div>
                </div>

            </div>
            <!-- Multi-View View -->
            <div class="multiview-page" ng-controller="MultiviewController" ng-show="activePage === 'multiview'">

                <div class="multiview-container">
                    <!-- Toolbar -->
                    <div class="multiview-toolbar">
                        <div class="layout-controls">
                            <button class="layout-btn" ng-class="{'active': layout === '1x1'}"
                                ng-click="setLayout('1x1')" title="Single View">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                                </svg>
                            </button>
                            <button class="layout-btn" ng-class="{'active': layout === '2x2'}"
                                ng-click="setLayout('2x2')" title="2x2 Grid">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                            </button>
                            <button class="layout-btn" ng-class="{'active': layout === '3x3'}"
                                ng-click="setLayout('3x3')" title="3x3 Grid">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="3" width="5" height="5"></rect>
                                    <rect x="10" y="3" width="5" height="5"></rect>
                                    <rect x="17" y="3" width="5" height="5"></rect>
                                    <rect x="3" y="10" width="5" height="5"></rect>
                                    <rect x="10" y="10" width="5" height="5"></rect>
                                    <rect x="17" y="10" width="5" height="5"></rect>
                                    <rect x="3" y="17" width="5" height="5"></rect>
                                    <rect x="10" y="17" width="5" height="5"></rect>
                                    <rect x="17" y="17" width="5" height="5"></rect>
                                </svg>
                            </button>
                            <button class="layout-btn" ng-class="{'active': layout === '4x4'}"
                                ng-click="setLayout('4x4')" title="4x4 Grid">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="2" y="2" width="4" height="4"></rect>
                                    <rect x="8" y="2" width="4" height="4"></rect>
                                    <rect x="14" y="2" width="4" height="4"></rect>
                                    <rect x="20" y="2" width="4" height="4"></rect>
                                    <rect x="2" y="8" width="4" height="4"></rect>
                                    <rect x="8" y="8" width="4" height="4"></rect>
                                    <rect x="14" y="8" width="4" height="4"></rect>
                                    <rect x="20" y="8" width="4" height="4"></rect>
                                    <rect x="2" y="14" width="4" height="4"></rect>
                                    <rect x="8" y="14" width="4" height="4"></rect>
                                    <rect x="14" y="14" width="4" height="4"></rect>
                                    <rect x="20" y="14" width="4" height="4"></rect>
                                    <rect x="2" y="20" width="4" height="4"></rect>
                                    <rect x="8" y="20" width="4" height="4"></rect>
                                    <rect x="14" y="20" width="4" height="4"></rect>
                                    <rect x="20" y="20" width="4" height="4"></rect>
                                </svg>
                            </button>
                        </div>

                        <div class="multiview-actions" style="display: flex; align-items: center; gap: 16px;">
                            <!-- Pagination -->
                            <div class="pagination-simple" style="display:flex; align-items:center; gap:8px;">
                                <button class="layout-btn"
                                    style="width:24px; height:24px; background:var(--bg-secondary); border:1px solid var(--border-color); color: var(--text-primary);"
                                    ng-click="prevPage()" ng-disabled="currentPage === 1" title="Previous Page">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="15 18 9 12 15 6"></polyline>
                                    </svg>
                                </button>
                                <span style="font-size:13px; font-weight:600; min-width:50px; text-align:center;">Page
                                    {{ currentPage }}</span>
                                <button class="layout-btn"
                                    style="width:24px; height:24px; background:var(--bg-secondary); border:1px solid var(--border-color); color: var(--text-primary);"
                                    ng-click="nextPage()" title="Next Page">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="9 18 15 12 9 6"></polyline>
                                    </svg>
                                </button>
                            </div>

                            <div style="width:1px; height:20px; background:var(--border-color);"></div>

                            <button class="btn btn-secondary" ng-click="clearAll()">{{ translations.multiview.clear_all
                                || "Clear All" }}</button>
                        </div>
                    </div>

                    <!-- Grid -->
                    <div class="grid-container" ng-class="'grid-' + layout">

                        <div class="camera-tile" ng-repeat="cell in cells track by $index">

                            <!-- Empty State -->
                            <div class="tile-placeholder" ng-if="!cell" ng-click="openCameraSelector($index)">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" style="opacity: 0.5; margin-bottom: 8px;">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                <span>{{ translations.multiview.add_camera || "Add Camera" }}</span>
                            </div>

                            <!-- Assigned State -->
                            <div class="tile-video-content" ng-if="cell" ng-dblclick="toggleFullScreen($index)">
                                <div class="video-sim">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M15.6 11.6L22 7v10l-6.4-4.5v-1z" />
                                        <rect x="2" y="5" width="14" height="14" rx="2" ry="2" />
                                    </svg>
                                </div>
                                <div class="tile-header">
                                    <span class="tile-cam-name">{{ cell.name }}</span>
                                    <span class="tile-status-dot"
                                        ng-class="'status-' + cell.status.toLowerCase()"></span>
                                </div>
                                <div class="tile-controls">
                                    <button class="btn-tile-close" ng-click="clearCell($event, $index)"
                                        title="Remove Camera">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <line x1="18" y1="6" x2="6" y2="18"></line>
                                            <line x1="6" y1="6" x2="18" y2="18"></line>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Camera Selector Modal -->
                <div class="modal-overlay" ng-class="{'open': isSelectorOpen}">
                    <div class="modal-content">
                        <div class="modal-header">
                            <span class="modal-title">{{ translations.actions.select || "Select Camera" }}</span>
                            <span class="modal-close" ng-click="closeCameraSelector()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <div class="search-container" style="margin-bottom: 16px;">
                                <input type="text" class="search-input" placeholder="Search cameras..."
                                    ng-model="cameraSearch" ng-change="filterCameras()">
                            </div>

                            <div class="camera-select-list">
                                <div class="camera-select-item" ng-repeat="cam in filteredCameras"
                                    ng-click="assignCamera(cam)">
                                    <div style="display:flex; flex-direction:column;">
                                        <span style="font-weight:500;">{{ cam.name }}</span>
                                        <span style="font-size:11px; color:var(--text-muted);">{{ cam.location }}</span>
                                    </div>
                                    <span class="status-badge" ng-class="cam.status.toLowerCase()"
                                        style="font-size:10px;">{{ cam.status }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Full Screen Overlay -->
                <div class="multiview-fullscreen-overlay" ng-if="fullScreenCellIndex !== null">
                    <div class="fullscreen-tile">
                        <div class="tile-video-content" style="width:100%; height:100%;">
                            <div class="video-sim" style="font-size: 80px;">
                                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M15.6 11.6L22 7v10l-6.4-4.5v-1z" />
                                    <rect x="2" y="5" width="14" height="14" rx="2" ry="2" />
                                </svg>
                            </div>
                            <div class="tile-header">
                                <span class="tile-cam-name" style="font-size: 18px;">{{ cells[fullScreenCellIndex].name
                                    }}</span>
                                <div style="display:flex; gap:8px; align-items:center;">
                                    <span class="badge" style="background:red;">{{ translations.cameras.live || "LIVE"
                                        }}</span>
                                    <button class="btn-tile-close" ng-click="toggleFullScreen(null)"
                                        title="Exit Fullscreen">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <line x1="18" y1="6" x2="6" y2="18"></line>
                                            <line x1="6" y1="6" x2="18" y2="18"></line>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="cameras-page" ng-controller="CamerasController" ng-show="activePage === 'cameras'">

                <!-- Filters & Actions -->
                <div class="filters-bar">
                    <div class="search-container">
                        <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                        <input type="text" class="search-input" placeholder="Search by name or location..."
                            ng-model="filters.search" ng-change="applyFilters()">
                    </div>

                    <div class="filter-group">
                        <select class="filter-select" ng-model="filters.status" ng-change="applyFilters()">
                            <option value="">{{ translations.cameras.all_status || "All Status" }}</option>
                            <option ng-repeat="status in filterOptions.statuses" value="{{status}}">{{status}}</option>
                        </select>

                        <select class="filter-select" ng-model="filters.group" ng-change="applyFilters()">
                            <option value="">{{ translations.cameras.all_groups || "All Groups" }}</option>
                            <option ng-repeat="group in filterOptions.groups" value="{{group}}">{{group}}</option>
                        </select>
                    </div>

                    <button class="btn-clear-filters" ng-click="clearFilters()">{{ translations.cameras.clear_filters ||
                        "Clear Filters" }}</button>

                    <button class="btn-add-camera" ng-click="addCamera()">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="12" y1="5" x2="12" y2="19"></line>
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                        </svg>
                        Add Camera
                    </button>
                </div>

                <!-- Table -->
                <div class="table-container">
                    <div class="table-content-scroll">
                        <table class="cameras-table">
                            <thead>
                                <tr>
                                    <th>{{ translations.cameras.name || "Camera Name" }}</th>
                                    <th>Location / Group</th>
                                    <th>{{ translations.alerts.status || "Status" }}</th>
                                    <th>{{ translations.cameras.recording || "Recording" }}</th>
                                    <th>{{ translations.cameras.last_seen || "Last Seen" }}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-if="isLoading">
                                    <td colspan="5" style="text-align:center; padding:20px;">Loading cameras...</td>
                                </tr>
                                <tr ng-if="dataError">
                                    <td colspan="5" style="text-align:center; color:red; padding:20px;">Error loading
                                        data</td>
                                </tr>
                                <tr ng-if="!isLoading && !dataError && paginatedCameras.length === 0">
                                    <td colspan="5" style="text-align:center; padding:20px;">{{
                                        translations.cameras.no_cameras || "No cameras found" }}</td>
                                </tr>

                                <tr ng-repeat="cam in paginatedCameras" ng-click="openCameraDetails(cam)"
                                    style="cursor: pointer;" class="camera-row-hover">
                                    <td>
                                        <div style="font-weight: 500;">{{ cam.name }}</div>
                                        <div style="font-size: 12px; color: var(--text-muted);">{{ cam.ip }}</div>
                                    </td>
                                    <td>{{ cam.location }}</td>
                                    <td>
                                        <span class="status-badge" ng-class="cam.status.toLowerCase()">
                                            <span class="status-dot"></span>
                                            {{ cam.status }}
                                        </span>
                                    </td>
                                    <td>
                                        <span ng-if="cam.recording" title="Recording On"
                                            style="color:var(--success-color);"> REC</span>
                                        <span ng-if="!cam.recording" title="Recording Off"
                                            style="color:var(--text-muted);"> Off</span>
                                    </td>
                                    <td style="font-size: 12px; color: var(--text-muted);">{{ cam.lastSeen }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- Pagination -->
                    <div class="pagination-bar">
                        <div class="pagination-info">{{ paginationLabel }}</div>
                        <div class="pagination-controls">
                            <button class="page-btn" ng-disabled="currentPage === 1" ng-click="prevPage()">{{
                                translations.actions.previous || "Previous" }}</button>
                            <button class="page-btn" ng-disabled="currentPage * itemsPerPage >= totalItems"
                                ng-click="nextPage()">{{ translations.actions.next || "Next" }}</button>
                        </div>
                    </div>
                </div>

                <!-- Device Scanner Modal -->
                <div class="modal-overlay" ng-class="{'open': showScanner}">
                    <div class="modal-content" style="width: 500px; max-width: 90%;">
                        <div class="modal-header">
                            <span class="modal-title">{{ translations.cameras.scan_devices || "Scan for Devices"
                                }}</span>
                            <span class="modal-close" ng-click="closeScanner()">&times;</span>
                        </div>
                        <div class="modal-body">

                            <!-- Scanning State -->
                            <div ng-if="isScanning" style="text-align: center; padding: 20px;">
                                <div class="scanning-loader" style="margin-bottom: 16px;">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none"
                                        stroke="var(--primary-color)" stroke-width="2" class="spin">
                                        <circle cx="12" cy="12" r="10" stroke-opacity="0.25"></circle>
                                        <path d="M12 2a10 10 0 0 1 10 10"></path>
                                    </svg>
                                </div>
                                <p>Scanning network for cameras...</p>
                                <div class="progress-bar-container"
                                    style="height: 6px; background: var(--bg-hover); border-radius: 3px; overflow: hidden; margin-top: 12px;">
                                    <div class="progress-bar" ng-style="{width: scanProgress + '%'}"
                                        style="height: 100%; background: var(--primary-color); transition: width 0.2s;">
                                    </div>
                                </div>
                            </div>

                            <!-- Results State -->
                            <div ng-if="!isScanning || discoveredDevices.length > 0">
                                <h4 style="margin-top: 0; margin-bottom: 12px; font-size: 14px; color: var(--text-secondary);"
                                    ng-if="discoveredDevices.length > 0">{{ translations.cameras.discovered ||
                                    "Discovered Devices" }}</h4>

                                <div class="device-list"
                                    style="max-height: 300px; overflow-y: auto; margin-bottom: 16px;">
                                    <div class="device-item" ng-repeat="device in discoveredDevices"
                                        ng-click="selectDevice(device)"
                                        style="display: flex; align-items: center; padding: 12px; background: var(--bg-hover); border-radius: 6px; margin-bottom: 8px; cursor: pointer; border: 1px solid transparent; transition: all 0.2s;">
                                        <div style="margin-right: 12px; color: var(--text-primary);">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <path d="M15.6 11.6L22 7v10l-6.4-4.5v-1z" />
                                                <rect x="2" y="5" width="14" height="14" rx="2" ry="2" />
                                            </svg>
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="font-weight: 500; color: var(--text-primary);">{{ device.name }}
                                            </div>
                                            <div style="font-size: 11px; color: var(--text-muted);">{{ device.ip }}  {{
                                                device.manufacturer }}</div>
                                        </div>
                                        <div style="color: var(--primary-color);">
                                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <polyline points="9 18 15 12 9 6"></polyline>
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                <div ng-if="!isScanning && discoveredDevices.length === 0"
                                    style="text-align: center; padding: 20px; color: var(--text-muted);">
                                    No devices found. Ensure cameras are connected to the same network.
                                </div>
                            </div>

                        </div>
                        <div class="modal-footer"
                            style="display: flex; justify-content: space-between; align-items: center;">
                            <button class="btn btn-secondary" ng-click="startScanning()" ng-disabled="isScanning">{{
                                translations.cameras.rescan || "Rescan" }}</button>
                            <button class="btn btn-secondary" ng-click="addManually()">{{
                                translations.cameras.add_manually || "Add Manually" }}</button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Camera Details / Settings Page -->
            <div class="camera-settings-page" ng-show="activePage === 'camera-settings'"
                ng-controller="CameraSettingsController" style="padding: 24px; height: 100%; box-sizing: border-box;">


                <div
                    style="background: var(--bg-card); border-radius: 8px; border: 1px solid var(--border-color); padding: 32px; height: 100%; display: flex; flex-direction: column; overflow: hidden;">



                    <!-- Display Area (Swappable Content) -->
                    <div style="flex: 1; overflow-y: auto; position: relative; margin-bottom: 24px; min-height: 0;">

                        <!-- VIEW: Live -->
                        <div ng-if="currentView === 'live'" class="live-view-container">

                            <!-- Video Feed -->
                            <video autoplay muted loop playsinline class="live-video" id="liveVideoPlayer">
                                <source
                                    src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
                                    type="video/mp4">
                                Your browser does not support the video tag.
                            </video>

                            <!-- Glassmorphism Overlays -->

                            <!-- Top Bar: Info & Status -->
                            <div class="overlay-top-bar">
                                <div class="camera-info">
                                    <div class="status-badge-live">
                                        <div class="status-dot-blink"></div> LIVE
                                    </div>
                                    <div style="display:flex; flex-direction:column;">
                                        <span class="cam-name">{{ camera.name }}</span>
                                        <span style="font-size:11px; opacity:0.7;">{{ camera.location }}</span>
                                    </div>
                                </div>

                                <!-- Tech Stats -->
                                <div class="tech-stats">
                                    <div class="stat-item">
                                        <svg class="stat-icon" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                                            <line x1="8" y1="21" x2="16" y2="21"></line>
                                            <line x1="12" y1="17" x2="12" y2="21"></line>
                                        </svg>
                                        <span>1080p</span> <!-- Placeholder, could be dynamic -->
                                    </div>
                                    <div class="stat-item">
                                        <svg class="stat-icon" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                                        </svg>
                                        <span>{{ liveStats.bitrate || '2400' }} kbps</span>
                                    </div>
                                    <div class="stat-item">
                                        <svg class="stat-icon" width="14" height="14" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <polyline points="12 6 12 12 16 14"></polyline>
                                        </svg>
                                        <span>{{ liveStats.fps || '30' }} FPS</span>
                                    </div>
                                </div>
                            </div>

                            <!-- PTZ Controls (Overlay) -->
                            <div class="glass-overlay ptz-overlay" ng-if="showPTZ && camera.type === 'PTZ'"
                                style="backdrop-filter: blur(4px);">
                                <!-- Top -->
                                <button class="ptz-btn" style="grid-column: 2; grid-row: 1;"
                                    ng-mousedown="ptzMove('up')" ng-mouseup="ptzStop()">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="18 15 12 9 6 15"></polyline>
                                    </svg>
                                </button>
                                <!-- Left -->
                                <button class="ptz-btn" style="grid-column: 1; grid-row: 2;"
                                    ng-mousedown="ptzMove('left')" ng-mouseup="ptzStop()">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="15 18 9 12 15 6"></polyline>
                                    </svg>
                                </button>
                                <!-- Center / Home -->
                                <div class="ptz-center" title="Home Position" ng-click="ptzHome()">
                                    <div style="width:8px; height:8px; background:white; border-radius:50%;"></div>
                                </div>
                                <!-- Right -->
                                <button class="ptz-btn" style="grid-column: 3; grid-row: 2;"
                                    ng-mousedown="ptzMove('right')" ng-mouseup="ptzStop()">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="9 18 15 12 9 6"></polyline>
                                    </svg>
                                </button>
                                <!-- Bottom -->
                                <button class="ptz-btn" style="grid-column: 2; grid-row: 3;"
                                    ng-mousedown="ptzMove('down')" ng-mouseup="ptzStop()">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </button>
                            </div>

                            <!-- Bottom Control Bar -->
                            <div class="glass-overlay overlay-control-bar">
                                <div class="control-btn" title="Snapshot" ng-click="takeSnapshot()">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z">
                                        </path>
                                        <circle cx="12" cy="13" r="4"></circle>
                                    </svg>
                                </div>
                                <div class="control-btn" title="Record" ng-click="toggleRecording()"
                                    ng-class="{'recording': isRecording}">
                                    <div style="width:12px; height:12px; background:currentColor; border-radius:50%;">
                                    </div>
                                </div>
                                <div class="control-btn" title="PTZ Controls" ng-click="togglePTZ()"
                                    ng-class="{'active': showPTZ}" ng-if="camera.type === 'PTZ'">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <line x1="2" y1="12" x2="22" y2="12"></line>
                                        <line x1="12" y1="2" x2="12" y2="22"></line>
                                    </svg>
                                </div>
                                <div class="control-btn" title="Audio" ng-click="toggleAudio()">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" ng-if="isAudioOn">
                                        <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                        <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                    </svg>
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2" ng-if="!isAudioOn">
                                        <line x1="1" y1="1" x2="23" y2="23"></line>
                                        <path d="M9 9v6a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path>
                                        <path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path>
                                        <line x1="12" y1="19" x2="12" y2="23"></line>
                                        <line x1="8" y1="23" x2="16" y2="23"></line>
                                    </svg>
                                </div>
                                <div class="control-btn" title="Fullscreen" ng-click="toggleFullscreen()">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3">
                                        </path>
                                    </svg>
                                </div>
                            </div>

                        </div>


                        <!-- VIEW: Zone Editor -->
                        <div ng-if="currentView === 'zone-editor'" class="zone-editor-container"
                            style="height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; background: #000; border-radius: 8px; overflow: hidden;"
                            ng-mousemove="onZoneMouseMove($event)" ng-mouseup="onZoneMouseUp()">

                            <!-- Toolbar -->
                            <div
                                style="position: absolute; top: 16px; left: 16px; z-index: 20; display: flex; gap: 8px;">
                                <button class="btn-primary" ng-click="addZone()">+ Add Zone</button>
                                <button class="btn-secondary" ng-click="saveZones()"
                                    style="background: rgba(0,0,0,0.6); color: white; border: 1px solid rgba(255,255,255,0.3);">Save
                                    & Exit</button>
                                <button class="btn-secondary" ng-click="handleAction('Settings')"
                                    style="background: rgba(0,0,0,0.6); color: white; border: 1px solid rgba(255,255,255,0.3);">{{
                                    translations.actions.cancel || "Cancel" }}</button>
                            </div>

                            <!-- Editor Area -->
                            <div class="zone-editor-area" id="zoneEditorArea"
                                style="position: relative; width: auto; height: auto; max-width: 100%; max-height: 100%; aspect-ratio: 16/9; cursor: crosshair; margin: auto;">

                                <!-- Background Video -->
                                <video autoplay muted loop playsinline
                                    style="width: 100%; height: 100%; object-fit: contain; pointer-events: none;">
                                    <source
                                        src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
                                        type="video/mp4">
                                </video>

                                <!-- Zone Overlay Container -->
                                <div
                                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
                                    <!-- Zones -->
                                    <div ng-repeat="zone in zones"
                                        style="position: absolute; pointer-events: auto; box-sizing: border-box;"
                                        ng-style="{ 
                                            'left': zone.x + '%', 
                                            'top': zone.y + '%', 
                                            'width': zone.w + '%', 
                                            'height': zone.h + '%',
                                            'background': '#000',
                                            'border': '1px solid #333'
                                        }" ng-mousedown="onZoneMouseDown($event, $index, 'move')">

                                        <!-- Label -->
                                        <div
                                            style="position: absolute; top: -20px; left: 0; padding: 2px 6px; font-size: 10px; font-weight: bold; border-radius: 2px; background: #333; color: #fff;">
                                            Mask {{ $index + 1 }}
                                            <span ng-click="removeZone($index); $event.stopPropagation()"
                                                style="margin-left: 4px; cursor: pointer;">&times;</span>
                                        </div>

                                        <!-- Resize Handles (Corners) -->
                                        <div class="resize-handle nw"
                                            ng-mousedown="onZoneMouseDown($event, $index, 'nw')"
                                            style="position: absolute; top: -5px; left: -5px; width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: nw-resize;">
                                        </div>
                                        <div class="resize-handle ne"
                                            ng-mousedown="onZoneMouseDown($event, $index, 'ne')"
                                            style="position: absolute; top: -5px; right: -5px; width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: ne-resize;">
                                        </div>
                                        <div class="resize-handle sw"
                                            ng-mousedown="onZoneMouseDown($event, $index, 'sw')"
                                            style="position: absolute; bottom: -5px; left: -5px; width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: sw-resize;">
                                        </div>
                                        <div class="resize-handle se"
                                            ng-mousedown="onZoneMouseDown($event, $index, 'se')"
                                            style="position: absolute; bottom: -5px; right: -5px; width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: se-resize;">
                                        </div>

                                        <!-- Resize Handles (Sides) -->
                                        <div class="resize-handle n" ng-mousedown="onZoneMouseDown($event, $index, 'n')"
                                            style="position: absolute; top: -5px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: ns-resize;">
                                        </div>
                                        <div class="resize-handle s" ng-mousedown="onZoneMouseDown($event, $index, 's')"
                                            style="position: absolute; bottom: -5px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: ns-resize;">
                                        </div>
                                        <div class="resize-handle w" ng-mousedown="onZoneMouseDown($event, $index, 'w')"
                                            style="position: absolute; left: -5px; top: 50%; transform: translateY(-50%); width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: ew-resize;">
                                        </div>
                                        <div class="resize-handle e" ng-mousedown="onZoneMouseDown($event, $index, 'e')"
                                            style="position: absolute; right: -5px; top: 50%; transform: translateY(-50%); width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: ew-resize;">
                                        </div>
                                        <div class="resize-handle sw"
                                            ng-mousedown="onZoneMouseDown($event, $index, 'sw')"
                                            style="position: absolute; bottom: -5px; left: -5px; width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: sw-resize;">
                                        </div>
                                        <div class="resize-handle se"
                                            ng-mousedown="onZoneMouseDown($event, $index, 'se')"
                                            style="position: absolute; bottom: -5px; right: -5px; width: 10px; height: 10px; background: #fff; border: 1px solid var(--accent-color); cursor: se-resize;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- VIEW: Settings -->
                        <div ng-if="currentView === 'settings'" class="settings-form-container"
                            style="background: var(--bg-hover); padding: 16px; border-radius: 8px; border: 1px solid var(--border-color);">
                            <h3 style="margin-top: 0; margin-bottom: 12px; color: var(--text-primary);">{{ isNewCamera ?
                                'Add New Camera' : 'Edit Configuration' }}</h3>
                            <form ng-submit="saveSettings()">
                                <!-- Tab Navigation -->
                                <div
                                    style="display: flex; gap: 4px; margin-bottom: 12px; border-bottom: 1px solid var(--border-color);">
                                    <div ng-click="setSettingsTab('general')"
                                        style="padding: 8px 16px; cursor: pointer; font-size: 13px; font-weight: 500;"
                                        ng-style="{'color': activeSettingsTab === 'general' ? 'var(--accent-color)' : 'var(--text-muted)', 'border-bottom': activeSettingsTab === 'general' ? '2px solid var(--accent-color)' : '2px solid transparent'}">
                                        {{ translations.settings.general || "General" }}</div>
                                    <div ng-click="setSettingsTab('detections')"
                                        style="padding: 8px 16px; cursor: pointer; font-size: 13px; font-weight: 500;"
                                        ng-style="{'color': activeSettingsTab === 'detections' ? 'var(--accent-color)' : 'var(--text-muted)', 'border-bottom': activeSettingsTab === 'detections' ? '2px solid var(--accent-color)' : '2px solid transparent'}">
                                        Detections
                                    </div>
                                    <div ng-click="setSettingsTab('privacy')"
                                        style="padding: 8px 16px; cursor: pointer; font-size: 13px; font-weight: 500;"
                                        ng-style="{'color': activeSettingsTab === 'privacy' ? 'var(--accent-color)' : 'var(--text-muted)', 'border-bottom': activeSettingsTab === 'privacy' ? '2px solid var(--accent-color)' : '2px solid transparent'}">
                                        Privacy
                                    </div>
                                </div>

                                <!-- Tab Content: General -->
                                <div ng-if="activeSettingsTab === 'general'"
                                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 4px;">
                                    <div class="form-group" style="margin-bottom: 8px;">
                                        <label
                                            style="display:block; margin-bottom:4px; font-size:12px; font-weight:600; color:var(--text-secondary);">Camera
                                            Name</label>
                                        <input type="text" ng-model="camera.name" class="search-input"
                                            style="width:100%; box-sizing:border-box;">
                                    </div>
                                    <div class="form-group" style="margin-bottom: 8px;">
                                        <label
                                            style="display:block; margin-bottom:4px; font-size:12px; font-weight:600; color:var(--text-secondary);">IP
                                            Address</label>
                                        <input type="text" ng-model="camera.ip" class="search-input"
                                            style="width:100%; box-sizing:border-box;">
                                    </div>
                                    <div class="form-group" style="margin-bottom: 8px;">
                                        <label
                                            style="display:block; margin-bottom:4px; font-size:12px; font-weight:600; color:var(--text-secondary);">{{
                                            translations.camera_settings.location || "Location" }}</label>
                                        <input type="text" ng-model="camera.location" class="search-input"
                                            style="width:100%; box-sizing:border-box;">
                                    </div>
                                    <div class="form-group" style="margin-bottom: 8px;">
                                        <label
                                            style="display:block; margin-bottom:4px; font-size:12px; font-weight:600; color:var(--text-secondary);">{{
                                            translations.camera_settings.type || "Type" }}</label>
                                        <select ng-model="camera.type" class="filter-select"
                                            style="width:100%; box-sizing:border-box;">
                                            <option value="IP">{{ translations.camera_settings.ip_camera || "IP Camera"
                                                }}</option>
                                            <option value="PTZ">{{ translations.camera_settings.ptz_camera || "PTZ
                                                Camera" }}</option>
                                            <option value="Fisheye">{{ translations.camera_settings.fisheye || "Fisheye"
                                                }}</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Tab Content: Detections -->
                                <div ng-if="activeSettingsTab === 'detections'" class="form-section form-group"
                                    style="margin-bottom: 24px;">


                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                        <div class="widget-toggle-item"
                                            style="justify-content: space-between; display: flex; align-items: center;">
                                            <span>{{ translations.camera_settings.motion_det || "Motion Detection"
                                                }}</span>
                                            <label class="switch">
                                                <input type="checkbox" ng-model="camera.detections.motion">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="widget-toggle-item"
                                            style="justify-content: space-between; display: flex; align-items: center;">
                                            <span>{{ translations.camera_settings.person_det || "Person Detection"
                                                }}</span>
                                            <label class="switch">
                                                <input type="checkbox" ng-model="camera.detections.person">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="widget-toggle-item"
                                            style="justify-content: space-between; display: flex; align-items: center;">
                                            <span>{{ translations.camera_settings.ppe_det || "PPE Detection" }}</span>
                                            <label class="switch">
                                                <input type="checkbox" ng-model="camera.detections.ppe">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="widget-toggle-item"
                                            style="justify-content: space-between; display: flex; align-items: center;">
                                            <span>{{ translations.camera_settings.vehicle_det || "Vehicle Detection"
                                                }}</span>
                                            <label class="switch">
                                                <input type="checkbox" ng-model="camera.detections.vehicle">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Tab Content: Privacy -->
                                <div ng-if="activeSettingsTab === 'privacy'" style="margin-bottom: 24px;">
                                    <!-- Privacy Mask Configuration -->
                                    <div
                                        style="margin-top: 20px; display: flex; justify-content: space-between; align-items: center; background: var(--bg-card); padding: 12px; border-radius: 6px; border: 1px dashed var(--border-color);">
                                        <div>
                                            <div style="font-weight: 500; font-size: 13px;">{{
                                                translations.camera_settings.privacy_mask || "Privacy Mask" }}</div>
                                            <div style="font-size: 11px; color: var(--text-muted);">Obscure sensitive
                                                areas from video</div>
                                        </div>
                                        <button type="button" class="btn-secondary"
                                            ng-click="handleAction('Configure Zone')">
                                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
                                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                            </svg>
                                            Configure Masks
                                        </button>
                                    </div>

                                    <!-- Detection Zone (Removed) -->
                                </div>
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px;">
                                    <button type="button" class="btn-secondary" ng-click="handleAction('View Live')">{{
                                        translations.actions.cancel || "Cancel" }}</button>
                                    <div style="display: flex; gap: 12px;">
                                        <button type="button" class="btn-secondary"
                                            style="color:var(--warning-color); border-color:var(--warning-color);"
                                            ng-click="saveAndRestart()">Save & Restart</button>
                                        <button type="submit" class="btn-primary">{{ translations.actions.save || "Save
                                            Changes" }}</button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- VIEW: Playback -->
                        <!-- VIEW: Playback -->
                        <!-- VIEW: Playback -->
                        <div ng-if="currentView === 'playback'" class="playback-container"
                            ng-controller="PlaybackController">

                            <!-- Video Area -->
                            <div class="playback-video-area">
                                <video class="playback-video" id="playbackPlayer" loop muted playsinline>
                                    <source
                                        src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
                                        type="video/mp4">
                                </video>

                                <!-- Overlay Info -->
                                <div class="playback-overlay-info">
                                    <div class="playback-badge">
                                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="3">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <polyline points="12 6 12 12 16 14"></polyline>
                                        </svg>
                                        PLAYBACK
                                    </div>
                                    <br>
                                    <div class="playback-timestamp">{{ currentPlaybackTime | date:'yyyy-MM-dd HH:mm:ss'
                                        }}</div>
                                </div>
                            </div>

                            <!-- Timeline & Controls Area -->
                            <div class="playback-controls-area">

                                <!-- Timeline (Scrubber) -->
                                <div class="timeline-container" id="timelineContainer"
                                    ng-mousedown="onTimelineMouseDown($event)"
                                    ng-mousemove="onTimelineMouseMove($event)" ng-mouseup="onTimelineMouseUp($event)">

                                    <!-- Timeline Track -->
                                    <div class="timeline-track" style="width: 100%;">
                                        <!-- Time Markers (Generated via ng-repeat or JS ideally, simplified here) -->
                                        <div class="time-marker" style="left: 0%;"><span>00:00</span></div>
                                        <div class="time-marker" style="left: 25%;"><span>06:00</span></div>
                                        <div class="time-marker" style="left: 50%;"><span>12:00</span></div>
                                        <div class="time-marker" style="left: 75%;"><span>18:00</span></div>

                                        <!-- Event Markers (Generated) -->
                                        <div ng-repeat="event in timelineEvents" class="timeline-event"
                                            ng-class="event.type"
                                            ng-style="{'left': event.left + '%', 'width': event.width + '%'}"
                                            title="{{ event.title }}">
                                        </div>
                                    </div>

                                    <!-- Scrubber Head -->
                                    <div class="timeline-scrubber" ng-style="{'left': scrubberPosition + '%'}">
                                        <div class="scrubber-head"></div>
                                    </div>
                                </div>

                                <!-- Control Buttons -->
                                <div class="playback-buttons">

                                    <!-- Left: Play/Pause/Skip -->
                                    <div class="playback-btn-group">
                                        <button class="pb-btn" title="Previous Event">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <polygon points="19 20 9 12 19 4 19 20"></polygon>
                                                <line x1="5" y1="19" x2="5" y2="5"></line>
                                            </svg>
                                        </button>
                                        <button class="pb-btn" title="-10s" ng-click="skip(-10)">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <path d="M11 17l-5-5 5-5M18 17l-5-5 5-5" />
                                            </svg>
                                        </button>

                                        <button class="pb-btn play-large" ng-click="togglePlayback()">
                                            <svg ng-if="!isPlaying" width="20" height="20" viewBox="0 0 24 24"
                                                fill="currentColor" stroke="none">
                                                <polygon points="5 3 19 12 5 21 5 3"></polygon>
                                            </svg>
                                            <svg ng-if="isPlaying" width="20" height="20" viewBox="0 0 24 24"
                                                fill="currentColor" stroke="none">
                                                <rect x="6" y="4" width="4" height="16"></rect>
                                                <rect x="14" y="4" width="4" height="16"></rect>
                                            </svg>
                                        </button>

                                        <button class="pb-btn" title="+10s" ng-click="skip(10)">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <path d="M13 17l5-5-5-5M6 17l5-5-5-5" />
                                            </svg>
                                        </button>
                                        <button class="pb-btn" title="Next Event">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <polygon points="5 4 15 12 5 20 5 4"></polygon>
                                                <line x1="19" y1="5" x2="19" y2="19"></line>
                                            </svg>
                                        </button>
                                    </div>

                                    <!-- Center: Date Picker -->
                                    <div class="playback-btn-group" style="position: relative;">
                                        <button class="date-picker-btn" ng-click="toggleDateDropdown($event)"
                                            title="Select Date"
                                            style="min-width: 140px; justify-content: space-between;">
                                            <div style="display: flex; align-items: center; gap: 8px;">
                                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none"
                                                    stroke="currentColor" stroke-width="2">
                                                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                                    <line x1="16" y1="2" x2="16" y2="6"></line>
                                                    <line x1="8" y1="2" x2="8" y2="6"></line>
                                                    <line x1="3" y1="10" x2="21" y2="10"></line>
                                                </svg>
                                                <span>{{ selectedDate | date:'EEE, MMM d' }}</span>
                                            </div>
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2"
                                                style="margin-left: 8px; opacity: 0.7;">
                                                <polyline points="6 9 12 15 18 9"></polyline>
                                            </svg>
                                        </button>

                                        <!-- Dropdown Menu -->
                                        <div class="date-dropdown-menu" ng-show="showDateDropdown"
                                            ng-click="$event.stopPropagation()">
                                            <div class="date-dropdown-header">Last 10 Days</div>
                                            <div class="date-dropdown-item" ng-repeat="date in historyDates"
                                                ng-click="selectDate(date)"
                                                ng-class="{'active': date.toDateString() === selectedDate.toDateString()}">
                                                {{ date | date:'EEE, MMM d' }}
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Right: Speed & Tools -->
                                    <div class="playback-btn-group">
                                        <button class="pb-btn" ng-click="changeSpeed()" title="Playback Speed">
                                            <span style="font-size: 12px; font-weight: 700;">{{ playbackSpeed }}x</span>
                                        </button>
                                        <div
                                            style="width: 1px; height: 16px; background: var(--border-color); margin: 0 4px;">
                                        </div>
                                        <button class="pb-btn" title="Download Clip">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                                <polyline points="7 10 12 15 17 10"></polyline>
                                                <line x1="12" y1="15" x2="12" y2="3"></line>
                                            </svg>
                                        </button>
                                        <button class="pb-btn" title="Snapshot">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <path
                                                    d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z">
                                                </path>
                                                <circle cx="12" cy="13" r="4"></circle>
                                            </svg>
                                        </button>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Control Bar (Fixed Bottom) -->
                    <div style="flex-shrink: 0; padding-top: 24px; border-top: 1px solid var(--border-color);">
                        <div
                            style="display: flex; flex-wrap: wrap; gap: 16px; justify-content: center; align-items: center;">
                            <!-- Live Button -->
                            <div class="camera-view-tab" ng-click="handleAction('View Live')"
                                ng-class="{'active': currentView === 'live'}">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M15.6 11.6L22 7v10l-6.4-4.5v-1z" />
                                    <rect x="2" y="5" width="14" height="14" rx="2" ry="2" />
                                </svg>
                                <span>{{ translations.camera_settings.live || "Live" }}</span>
                            </div>

                            <div class="camera-view-tab" ng-click="handleAction('Playback')"
                                ng-class="{'active': currentView === 'playback'}">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                <span>{{ translations.camera_settings.playback || "Playback" }}</span>
                            </div>
                            <div class="camera-view-tab" ng-click="handleAction('Settings')"
                                ng-class="{'active': currentView === 'settings'}">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="3"></circle>
                                    <path
                                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                    </path>
                                </svg>
                                <span>{{ translations.camera_settings.settings || "Settings" }}</span>
                            </div>


                            <div class="camera-view-tab danger" ng-click="handleAction('Delete')" ng-hide="isNewCamera">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path
                                        d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                    </path>
                                </svg>
                                <span>Delete</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Generic Action Confirmation Modal -->
                <div class="modal-overlay" ng-class="{'open': showConfirmModal}" ng-show="showConfirmModal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <span class="modal-title">{{ confirmTitle }}</span>
                            <span class="modal-close" ng-click="cancelAction()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <p>{{ confirmMessage }}</p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" ng-click="cancelAction()">{{ translations.actions.cancel
                                || "Cancel" }}</button>
                            <button class="btn btn-primary" ng-click="executeAction()">Confirm</button>
                        </div>
                    </div>
                </div>

                <!-- Delete Confirmation Modal -->
                <div class="modal-overlay" ng-class="{'open': showDeleteModal}">
                    <div class="modal-content">
                        <div class="modal-header">
                            <span class="modal-title">Delete Camera</span>
                            <span class="modal-close" ng-click="cancelDelete()">&times;</span>
                        </div>
                        <div class="modal-body">
                            <p>Are you sure you want to delete <strong>{{ camera.name }}</strong>?</p>
                            <p style="color: var(--text-muted); font-size: 14px;">This action cannot be undone.</p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" ng-click="cancelDelete()">{{ translations.actions.cancel
                                || "Cancel" }}</button>
                            <button class="btn btn-primary" style="background-color: var(--danger-color);"
                                ng-click="confirmDelete()">Delete</button>
                        </div>
                    </div>
                </div>






                <!-- End Camera Settings Page -->
            </div>

            <!-- Camera Issue Details Page -->
            <div class="issue-details-page" ng-show="activePage === 'camera-issue-details'"
                ng-controller="CameraIssueDetailsController">

                <!-- Header -->
                <div class="issue-header">
                    <div class="issue-title-group">
                        <div class="issue-camera-name">{{ issue.name }}</div>
                        <div class="issue-camera-location">{{ issue.location }}</div>
                    </div>
                    <div style="display:flex; gap: 16px; align-items:center;">
                        <div class="issue-status-badge" ng-class="issue.status.toLowerCase()">
                            <span class="status-dot"></span>
                            {{ issue.status | uppercase }}
                        </div>
                        <button class="btn btn-secondary" ng-click="goBack()">Back to Dashboard</button>
                    </div>
                </div>

                <!-- Content Grid -->
                <div class="issue-content-grid">
                    <!-- Preview -->
                    <div class="issue-preview-section">
                        <div class="preview-container">
                            <!-- Offline State (SRS 4.2.2) -->
                            <div class="offline-placeholder" ng-if="issue.status === 'Offline'">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="1.5">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                    <circle cx="12" cy="12" r="3"></circle>
                                    <line x1="1" y1="1" x2="23" y2="23"></line>
                                </svg>
                                <span style="font-size: 18px; font-weight: 500;">Camera Offline</span>
                                <span style="font-size:12px; color:var(--text-muted);">Last Online: {{ issue.time
                                    }}</span>
                            </div>
                            <!-- Warning State (SRS 5.2.2) -->
                            <div class="live-sim" ng-if="issue.status === 'Warning'"
                                style="width:100%; height:100%; display:flex; align-items:center; justify-content:center; color:#fff; flex-direction: column;">
                                <div style="font-size:80px; opacity:0.2;">
                                    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M15.6 11.6L22 7v10l-6.4-4.5v-1z" />
                                        <rect x="2" y="5" width="14" height="14" rx="2" ry="2" />
                                    </svg>
                                </div>
                                <span style="margin-top:16px; font-size:16px;opacity:0.6;">Live Stream Active</span>
                                <div class="live-overlay">
                                    <span>FPS: {{ issue.details.currentFps }} / {{ issue.details.expectedFps
                                        }}</span>
                                    <span>Bitrate: 2200kbps</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Details Panel -->
                    <div class="issue-details-panel">
                        <!-- Info Card (SRS 4.2.3 / 5.2.3) -->
                        <div class="details-card">
                            <div class="card-title">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="12" y1="16" x2="12" y2="12"></line>
                                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                </svg>
                                Diagnostic Info
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Issue Type</span>
                                <span class="detail-value" style="font-weight:700;">{{ issue.details.issueType ||
                                    'Unknown Issue' }}</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Issue Detected</span>
                                <span class="detail-value">{{ issue.time }}</span>
                            </div>
                            <!-- Offline Specific -->
                            <div class="detail-row" ng-if="issue.status === 'Offline'">
                                <span class="detail-label">Duration</span>
                                <span class="detail-value">{{ issue.details.duration || 'Unknown' }}</span>
                            </div>
                            <!-- Warning Specific -->
                            <div class="detail-row" ng-if="issue.status === 'Warning'">
                                <span class="detail-label">Impact</span>
                                <span class="detail-value" style="color:var(--warning-color);">{{
                                    issue.details.impact
                                    }}</span>
                            </div>
                            <!-- Health Bar if Warning (SRS 5.2.4) -->
                            <div ng-if="issue.status === 'Warning'">
                                <div style="margin-top:12px; font-size:12px; color:var(--text-secondary);">Stream
                                    Health
                                </div>
                                <div class="health-bar-container">
                                    <div class="health-bar-fill" style="width: 65%;"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Actions Card (SRS 4.2.4 / 5.2.5) -->
                        <div class="details-card">
                            <div class="card-title">Actions</div>
                            <div class="action-buttons-list">
                                <!-- Offline Actions -->
                                <button ng-if="issue.status === 'Offline'" class="action-btn"
                                    ng-click="performAction('Retry Connection')">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M23 4v6h-6"></path>
                                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                                    </svg>
                                    Retry Connection
                                </button>
                                <button ng-if="issue.status === 'Offline'" class="action-btn"
                                    ng-click="performAction('Reboot Camera')">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
                                        <line x1="12" y1="2" x2="12" y2="12"></line>
                                    </svg>
                                    Reboot Camera
                                </button>
                                <button ng-if="issue.status === 'Offline'" class="action-btn"
                                    ng-click="performAction('Check Network')">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M4 11a9 9 0 0 1 9 9"></path>
                                        <path d="M4 4a16 16 0 0 1 16 16"></path>
                                        <circle cx="5" cy="19" r="1"></circle>
                                    </svg>
                                    Check Network Status
                                </button>

                                <!-- Warning Actions -->
                                <button ng-if="issue.status === 'Warning'" class="action-btn"
                                    ng-click="performAction('Refresh Stream')">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M23 4v6h-6"></path>
                                        <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                                    </svg>
                                    Refresh Stream
                                </button>
                                <button ng-if="issue.status === 'Warning'" class="action-btn"
                                    ng-click="performAction('Reduce Stream Quality')">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                                        <polyline points="17 6 23 6 23 12"></polyline>
                                    </svg>
                                    Reduce Quality (Stability)
                                </button>


                            </div>
                            <div ng-if="actionMessage"
                                style="margin-top:12px; font-size:12px; color:var(--success-color); text-align:center;">
                                {{ actionMessage }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Alert Details Page -->
            <div class="alert-details-page" ng-show="activePage === 'alert-details'"
                ng-controller="AlertDetailsController">

                <!-- Header Bar -->
                <div class="alert-header-bar">
                    <button class="btn-back" ng-click="goBack()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                        Back to Alerts
                    </button>
                    <div class="alert-header-actions">
                        <button class="btn-primary" ng-click="acknowledge()" ng-if="alert.status === 'Unread'"
                            title="Acknowledge Alert">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="20 6 9 17 4 12"></polyline>
                            </svg>
                            Acknowledge
                        </button>
                        <button class="btn-primary" ng-click="resolve()" ng-if="alert.status !== 'Resolved'"
                            title="Resolve Alert">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            Resolve
                        </button>
                        <button class="btn-secondary" ng-click="viewCamera()" title="Live Camera Mode">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z">
                                </path>
                                <circle cx="12" cy="13" r="4"></circle>
                            </svg>
                            Live Camera
                        </button>
                        <button class="btn-secondary delete-btn" ng-click="deleteAlert()"
                            style="color: var(--error-color); border-color: var(--error-color);" title="Delete Alert">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path
                                    d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                </path>
                            </svg>
                            Delete
                        </button>
                    </div>
                </div>

                <!-- Main Grid -->
                <div class="alert-details-grid">

                    <!-- Left Column -->
                    <div class="details-left">

                        <!-- Camera View (Moved to Top) -->
                        <div class="details-card">
                            <div class="card-title">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polygon points="23 7 16 12 23 17 23 7"></polygon>
                                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                                </svg>
                                Camera View
                            </div>
                            <div class="alert-camera-view">
                                <video autoplay muted loop playsinline
                                    style="width: 100%; height: 100%; object-fit: contain;">
                                    <source
                                        src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4"
                                        type="video/mp4">
                                </video>
                                <div
                                    style="position:absolute; top:12px; right:12px; background:rgba(0,0,0,0.6); padding:4px 8px; border-radius:4px; font-size:12px;">
                                    Playback
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Right Column -->
                    <div class="details-right">

                        <!-- Info Card (Moved to Right) -->
                        <div class="details-card">
                            <div class="alert-info-header" style="border-bottom: none; padding-bottom: 0;">
                                <div class="alert-title-large">{{ alert.type }}</div>
                                <div class="alert-meta-grid" style="grid-template-columns: 1fr; gap: 12px;">
                                    <div class="meta-item">
                                        <span class="meta-label">Severity</span>
                                        <span class="badge-severity-large" ng-class="getSeverityClass(alert.severity)">
                                            {{ alert.severity }}
                                        </span>
                                    </div>
                                    <div class="meta-item">
                                        <span class="meta-label">Time</span>
                                        <span class="meta-value">{{ alert.time }}</span>
                                    </div>
                                    <div class="meta-item">
                                        <span class="meta-label">Camera</span>
                                        <span class="meta-value">{{ alert.cameraName || 'Entrance Cam 01' }}</span>
                                    </div>
                                    <div class="meta-item">
                                        <span class="meta-label">Location</span>
                                        <span class="meta-value">{{ alert.location }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Description Card -->
                        <div class="details-card">
                            <div class="card-title">Alert Description</div>
                            <p class="alert-description-text">
                                {{ alert.description || 'System detected an anomaly at the specified location.' }}
                            </p>
                        </div>

                    </div>

                </div>

            </div>

            <!-- Settings Page -->
            <div class="settings-page" ng-show="activePage === 'settings'" ng-controller="SettingsController">

                <div class="settings-container">

                    <!-- Sidebar -->
                    <div class="settings-sidebar">
                        <div class="settings-nav-item" ng-class="{'active': activeTab === 'general'}"
                            ng-click="setTab('general')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path
                                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>{{ translations.settings.general || "General" }}
                        </div>
                        <div class="settings-nav-item" ng-class="{'active': activeTab === 'users'}"
                            ng-click="setTab('users')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>{{ translations.settings.users_roles || "Users & Roles" }}
                        </div>
                        <div class="settings-nav-item" ng-class="{'active': activeTab === 'storage'}"
                            ng-click="setTab('storage')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                            </svg>{{ translations.settings.storage || "Storage" }}
                        </div>
                        <div class="settings-nav-item" ng-class="{'active': activeTab === 'network'}"
                            ng-click="setTab('network')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="2" y1="12" x2="22" y2="12"></line>
                                <path
                                    d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
                                </path>
                            </svg>{{ translations.settings.network || "Network" }}
                        </div>
                        <div class="settings-nav-item" ng-class="{'active': activeTab === 'system'}"
                            ng-click="setTab('system')">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect>
                                <line x1="12" y1="18" x2="12.01" y2="18"></line>
                            </svg>{{ translations.settings.system || "System" }}
                        </div>
                    </div>

                    <!-- Content -->
                    <div class="settings-content">

                        <!-- General Tab -->
                        <div ng-if="activeTab === 'general'">
                            <div class="settings-header">
                                <h2 class="settings-title">{{ translations.settings.general_settings || 'General
                                    Settings' }}</h2>
                                <p class="settings-subtitle">{{ translations.settings.configure_basic || 'Configure
                                    basic system parameters' }}</p>
                            </div>

                            <form ng-submit="saveSettings()">
                                <div class="settings-section">
                                    <h3 class="section-title">{{ translations.settings.system_identification || 'System
                                        Identification' }}</h3>
                                    <div class="form-grid">
                                        <div class="form-group-setting">
                                            <label class="form-label">{{ translations.settings.system_name || 'System
                                                Name' }}</label>
                                            <input type="text" class="form-input-setting" ng-model="general.systemName">
                                        </div>
                                        <div class="form-group-setting">
                                            <label class="form-label">{{ translations.settings.timezone || 'Timezone'
                                                }}</label>
                                            <select class="form-select-setting" ng-model="general.timezone"
                                                ng-options="tz for tz in timezones"></select>
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-section">
                                    <h3 class="section-title">{{ translations.settings.regional_language || 'Regional &
                                        Language' }}</h3>
                                    <div class="form-grid">
                                        <div class="form-group-setting">
                                            <label class="form-label">{{ translations.settings.language || 'Language'
                                                }}</label>
                                            <select class="form-select-setting" ng-model="general.language"
                                                ng-options="l.code as l.name for l in languages"
                                                ng-change="changeLanguage()"></select>
                                        </div>
                                        <div class="form-group-setting">
                                            <label class="form-label">{{ translations.settings.auto_logout || 'Auto
                                                Logout (Minutes)' }}</label>
                                            <input type="number" class="form-input-setting"
                                                ng-model="general.autoLogout">
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-section">
                                    <button class="btn-primary" type="submit">{{ translations.settings.save_changes ||
                                        'Save Changes' }}</button>
                                </div>
                            </form>
                        </div>

                        <!-- Users Tab -->
                        <div ng-if="activeTab === 'users'">
                            <div class="settings-header"
                                style="display:flex; justify-content:space-between; align-items:flex-end;">
                                <div>
                                    <h2 class="settings-title">Users & Roles</h2>
                                    <p class="settings-subtitle">Manage system access</p>
                                </div>
                                <button class="btn-primary" ng-click="addUser()">+ Add User</button>
                            </div>

                            <div class="setting-card" style="padding:0; overflow:hidden;">
                                <div class="user-row" ng-repeat="user in users">
                                    <div style="display:flex; align-items:center;">
                                        <div class="user-avatar">{{ user.initials }}</div>
                                        <div>
                                            <div style="font-weight:600; font-size:14px;">{{ user.name }}</div>
                                            <div style="font-size:12px; color:var(--text-muted);">{{ user.email }}</div>
                                        </div>
                                    </div>
                                    <div style="display:flex; align-items:center; gap:16px;">
                                        <span class="badge"
                                            style="background:var(--bg-secondary); color:var(--text-secondary);">{{
                                            user.role
                                            }}</span>
                                        <div style="display:flex; gap:8px;">
                                            <button class="btn-secondary" style="padding:4px 8px; min-width:auto;"
                                                ng-click="editUser(user)">Edit</button>
                                            <button class="btn-secondary"
                                                style="padding:4px 8px; min-width:auto; color:var(--danger-color); border-color:var(--danger-color);"
                                                ng-click="deleteUser(user)">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Storage Tab -->
                        <div ng-if="activeTab === 'storage'">
                            <div class="settings-header">
                                <h2 class="settings-title">Storage Management</h2>
                                <p class="settings-subtitle">Configure disk usage and retention policies</p>
                            </div>

                            <div class="settings-section">
                                <h3 class="section-title">Disk Usage</h3>
                                <div class="setting-card">
                                    <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
                                        <span style="font-weight:500;">Local Storage ({{ storage.usedSpace }}GB / {{
                                            storage.totalSpace }}GB)</span>
                                        <span style="font-weight:600;">{{ getStoragePercentage() | number:1 }}%
                                            Used</span>
                                    </div>
                                    <div class="storage-bar-bg">
                                        <div class="storage-bar-fill"
                                            ng-style="{ width: getStoragePercentage() + '%' }"></div>
                                    </div>
                                    <div style="display:flex; gap:16px; margin-top:16px;">
                                        <div style="font-size:12px; color:var(--text-muted);"><span
                                                style="color:var(--success-color);"></span> Recordings</div>
                                        <div style="font-size:12px; color:var(--text-muted);"><span
                                                style="color:var(--bg-secondary);"></span> Free Space</div>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-section">
                                <h3 class="section-title">Retention Policy</h3>
                                <form ng-submit="saveSettings()">
                                    <div class="form-grid">
                                        <div class="form-group-setting">
                                            <label class="form-label">Retention Period (Days)</label>
                                            <input type="number" class="form-input-setting"
                                                ng-model="storage.retentionDays">
                                        </div>
                                        <div class="form-group-setting">
                                            <label class="form-label">Minimum Retention Guarantee (Days)</label>
                                            <input type="number" class="form-input-setting"
                                                ng-model="storage.minRetention">
                                        </div>
                                    </div>
                                    <div class="form-group-setting"
                                        style="display:flex; align-items:center; gap:12px; margin-top:12px;">
                                        <input type="checkbox" ng-model="storage.enableOverwrite" id="overwrite">
                                        <label for="overwrite" class="form-label"
                                            style="margin:0; cursor:pointer;">Overwrite
                                            oldest footage when full</label>
                                    </div>
                                    <button class="btn-primary" type="submit" style="margin-top:16px;">Save
                                        Policy</button>
                                </form>
                            </div>
                        </div>

                        <!-- Network Tab -->
                        <div ng-if="activeTab === 'network'">
                            <div class="settings-header">
                                <h2 class="settings-title">Network Configuration</h2>
                                <p class="settings-subtitle">Server network settings</p>
                            </div>

                            <form ng-submit="saveSettings()">
                                <div class="settings-section">
                                    <h3 class="section-title">IP Configuration</h3>
                                    <div class="form-grid">
                                        <div class="form-group-setting">
                                            <label class="form-label">IP Assignment</label>
                                            <select class="form-select-setting" ng-model="network.ipType">
                                                <option>DHCP</option>
                                                <option>Static</option>
                                            </select>
                                        </div>
                                        <div class="form-group-setting">
                                            <label class="form-label">IP Address</label>
                                            <input type="text" class="form-input-setting" ng-model="network.ipAddress">
                                        </div>
                                        <div class="form-group-setting">
                                            <label class="form-label">Subnet Mask</label>
                                            <input type="text" class="form-input-setting" ng-model="network.subnetMask">
                                        </div>
                                        <div class="form-group-setting">
                                            <label class="form-label">Gateway</label>
                                            <input type="text" class="form-input-setting" ng-model="network.gateway">
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-section">
                                    <h3 class="section-title">Ports</h3>
                                    <div class="form-grid">
                                        <div class="form-group-setting">
                                            <label class="form-label">HTTP Port</label>
                                            <input type="number" class="form-input-setting" ng-model="network.httpPort">
                                        </div>
                                        <div class="form-group-setting">
                                            <label class="form-label">RTSP Port (Streaming)</label>
                                            <input type="number" class="form-input-setting" ng-model="network.rtspPort">
                                        </div>
                                    </div>
                                    <button class="btn-primary" type="submit" style="margin-top:16px;">Save
                                        Network</button>
                                </div>
                            </form>
                        </div>

                        <!-- System Tab -->
                        <div ng-if="activeTab === 'system'">
                            <div class="settings-header">
                                <h2 class="settings-title">System Information</h2>
                                <p class="settings-subtitle">Maintenance and diagnostics</p>
                            </div>

                            <div class="settings-section">
                                <div class="form-grid">
                                    <div class="setting-card">
                                        <div class="form-label">Software Version</div>
                                        <div style="font-size:16px; font-weight:600;">{{ system.version }}</div>
                                        <div style="margin-top:8px;">
                                            <button class="btn-secondary" style="font-size:12px; padding:4px 8px;"
                                                ng-click="checkUpdates()">
                                                {{ isChecking ? 'Checking...' : 'Check for Updates' }}
                                            </button>
                                        </div>
                                    </div>
                                    <div class="setting-card">
                                        <div class="form-label">Serial Number</div>
                                        <div style="font-size:16px; font-weight:600;">{{ system.serialNumber }}</div>
                                    </div>
                                    <div class="setting-card">
                                        <div class="form-label">Uptime</div>
                                        <div style="font-size:16px; font-weight:600;">{{ system.uptime }}</div>
                                    </div>
                                </div>
                            </div>

                            <div class="settings-section">
                                <h3 class="section-title">Maintenance Actions</h3>
                                <div style="display:flex; gap:16px;">
                                    <button class="btn-secondary" ng-click="restartSystem()">Restart Services</button>
                                    <button class="btn-secondary"
                                        style="color:var(--danger-color); border-color:var(--danger-color);">Factory
                                        Reset</button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Profile Page -->
            <div class="profile-page" ng-show="activePage === 'profile'" ng-controller="ProfileController">
                <div class="profile-container">

                    <!-- Profile Header -->
                    <div class="profile-header-card">
                        <div class="profile-avatar-large" ng-click="triggerAvatarUpload()">
                            <img ng-if="profile.avatarUrl" ng-src="{{profile.avatarUrl}}" alt="Profile">
                            <span ng-if="!profile.avatarUrl">{{ profile.initials }}</span>
                        </div>
                        <input type="file" id="avatar-upload" style="display: none;" accept="image/*"
                            onchange="angular.element(this).scope().handleAvatarSelect(this)">
                        <div class="profile-info-primary">
                            <h1>{{ profile.name }}</h1>
                            <p>{{ profile.role }}  {{ profile.department }}</p>
                            <div class="profile-badges">
                                <span class="role-badge">{{ profile.role }}</span>
                                <span class="badge"
                                    style="background:var(--success-color); color:var(--bg-app); font-size:12px; font-weight:600; padding:4px 12px; border-radius:4px;">Active</span>
                            </div>
                        </div>
                        <div style="margin-left:auto; display:flex; gap:12px;">
                            <button class="btn-primary" id="save-profile-btn" ng-click="saveProfile()">Save
                                Changes</button>
                        </div>
                    </div>

                    <div class="profile-grid">
                        <!-- Left Column: Personal Info & Security -->
                        <div class="profile-column-main">

                            <!-- Personal Info Section -->
                            <div class="profile-section">
                                <h3>Personal Information</h3>
                                <div class="form-grid">
                                    <div class="form-group-profile">
                                        <label class="form-label-profile">Full Name</label>
                                        <input type="text" class="form-input-profile" ng-model="profile.name">
                                    </div>
                                    <div class="form-group-profile">
                                        <label class="form-label-profile">Email Address</label>
                                        <input type="email" class="form-input-profile" ng-model="profile.email">
                                    </div>
                                    <div class="form-group-profile">
                                        <label class="form-label-profile">Phone Number</label>
                                        <input type="text" class="form-input-profile" ng-model="profile.phone">
                                    </div>
                                    <div class="form-group-profile">
                                        <label class="form-label-profile">Role (Read Only)</label>
                                        <input type="text" class="form-input-profile" ng-model="profile.role" readonly>
                                    </div>
                                </div>
                            </div>

                            <!-- Security Section -->
                            <div class="profile-section">
                                <h3>Security & Password</h3>
                                <div class="form-grid">
                                    <div class="form-group-profile">
                                        <label class="form-label-profile">Current Password</label>
                                        <input type="password" class="form-input-profile"
                                            ng-model="security.currentPassword" placeholder="">
                                    </div>
                                    <div class="form-group-profile">
                                        <label class="form-label-profile">New Password</label>
                                        <input type="password" class="form-input-profile"
                                            ng-model="security.newPassword" placeholder="">
                                    </div>
                                    <div class="form-group-profile">
                                        <label class="form-label-profile">Confirm Password</label>
                                        <input type="password" class="form-input-profile"
                                            ng-model="security.confirmPassword" placeholder="">
                                    </div>
                                    <div class="form-group-profile" style="display:flex; align-items:flex-end;">
                                        <button class="btn-secondary" ng-click="changePassword()">Update
                                            Password</button>
                                    </div>
                                </div>

                                <div
                                    style="margin-top:24px; border-top:1px solid var(--border-color); padding-top:24px;">
                                    <div style="display:flex; justify-content:space-between; align-items:center;">
                                        <div>
                                            <div style="font-weight:600; font-size:15px; margin-bottom:4px;">
                                                Two-Factor
                                                Authentication</div>
                                            <div style="font-size:13px; color:var(--text-muted);">Add an extra layer
                                                of security
                                                to your account.</div>
                                        </div>
                                        <div class="toggle-switch" ng-class="{'active': security.twoFactorEnabled}"
                                            ng-click="toggle2FA()">
                                            <div class="toggle-knob"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- Right Column: Preferences & Activity -->
                        <!-- Preferences -->
                        <div class="profile-section">
                            <h3>Preferences</h3>
                            <div class="form-group-profile">
                                <label class="form-label-profile">Default View</label>
                                <select class="form-input-profile" ng-model="preferences.defaultView">
                                    <option value="dashboard">Dashboard</option>
                                    <option value="multiview">Multiview</option>
                                    <option value="alerts">Alerts</option>
                                </select>
                            </div>
                            <div class="form-group-profile">
                                <label class="form-label-profile">Interface Theme</label>
                                <select class="form-input-profile" ng-model="preferences.theme"
                                    ng-change="setTheme(preferences.theme)">
                                    <option value="light">Light Mode</option>
                                    <option value="dark">Dark Mode</option>
                                </select>
                            </div>
                            <div class="form-group-profile">
                                <label class="form-label-profile">Notifications</label>
                                <div style="display:flex; flex-direction:column; gap:12px; margin-top:8px;">
                                    <label
                                        style="display:flex; align-items:center; gap:8px; font-size:13px; cursor:pointer;">
                                        <input type="checkbox" ng-model="preferences.notifications.email"> Email
                                        Notifications
                                    </label>
                                    <label
                                        style="display:flex; align-items:center; gap:8px; font-size:13px; cursor:pointer;">
                                        <input type="checkbox" ng-model="preferences.notifications.criticalAlerts">
                                        Critical
                                        Alerts Only
                                    </label>
                                    <label
                                        style="display:flex; align-items:center; gap:8px; font-size:13px; cursor:pointer;">
                                        <input type="checkbox" ng-model="preferences.notifications.systemHealth">
                                        System
                                        Health Reports
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Activity Log -->
                        <div class="profile-section">
                            <h3>Recent Activity</h3>
                            <div class="activity-list">
                                <div class="activity-item" ng-repeat="log in activityLog">
                                    <div class="activity-icon">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                                        </svg>
                                    </div>
                                    <div class="activity-details">
                                        <div class="activity-action">{{ log.action }}</div>
                                        <div class="activity-meta">{{ log.time }}  {{ log.device }}</div>
                                    </div>
                                </div>
                                <div style="text-align:center; margin-top:12px;">
                                    <a href="#"
                                        style="font-size:13px; color:var(--primary-color); text-decoration:none;">View
                                        Full
                                        Log</a>
                                </div>
                            </div>
                        </div>

                        <!-- Session Management -->
                        <div class="profile-section">
                            <h3>Session Management</h3>
                            <p style="font-size:13px; color:var(--text-secondary); margin-bottom:16px;">Log out
                                of all other
                                active sessions on other devices.</p>
                            <button class="btn-secondary"
                                style="width:100%; color:var(--danger-color); border-color:var(--danger-color);"
                                ng-click="logoutAllSessions()">Log Out All Other Devices</button>
                        </div>

                    </div>
                </div>

            </div>
            <!-- Search Views -->

            <!-- NuraAi Chatbot View -->
            <div class="nura-ai-page" ng-controller="NuraAiController" ng-show="activePage === 'search-nura-ai'">
                <div class="chat-container">
                    <div class="chat-header">
                        <div style="display:flex; align-items:center; gap:16px;">
                            <div class="chat-avatar-large">AI</div>
                            <div class="chat-title">
                                <h2>NuraAi Assistant</h2>
                                <p>Always here to help you manage your VMS</p>
                            </div>
                        </div>
                        <button class="btn-clear-chat" title="Clear History" ng-click="clearHistory()"
                            style="margin-left:auto;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path
                                    d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                                </path>
                            </svg>
                        </button>
                    </div>

                    <div class="chat-body" id="nura-ai-chat-body">
                        <div class="message" ng-repeat="msg in chatHistory" ng-class="msg.sender">
                            <div class="message-avatar" ng-if="msg.sender === 'ai'">AI</div>
                            <div class="message-avatar" ng-if="msg.sender === 'user'">You</div>
                            <div class="message-bubble">
                                <div ng-if="msg.text">{{ msg.text }}</div>

                                <!-- Alert List View -->
                                <!-- Alert List Carousel -->
                                <div class="chat-alert-list" ng-if="msg.type === 'alert-list'">
                                    <div class="chat-alert-item" ng-repeat="alert in msg.alerts">

                                        <div class="alert-item-header">
                                            <span class="chat-alert-type">{{ alert.type }}</span>
                                            <span class="chat-alert-severity"
                                                ng-class="'severity-' + alert.severity.toLowerCase()">{{
                                                alert.severity
                                                }}</span>
                                        </div>

                                        <div class="chat-alert-details">
                                            <div style="font-weight: 500; color: var(--text-primary);">{{
                                                alert.cameraName }}</div>
                                            <div>{{ alert.location }}</div>
                                            <div class="chat-alert-time">{{ alert.timestamp | date:'shortTime' }}
                                            </div>
                                        </div>

                                        <div class="chat-alert-actions">
                                            <button class="btn-card-action primary"
                                                ng-click="openAlertDetails(alert)">View</button>
                                            <button class="btn-card-action" ng-click="acknowledge(alert)">Ack</button>
                                        </div>

                                    </div>

                                    <!-- "View All" Card at end if needed, or keep as footer link outside scroll -->
                                    <div class="chat-alert-item"
                                        style="justify-content:center; align-items:center; min-height:120px;"
                                        ng-click="navigateTo('alerts')">
                                        <div style="text-align:center; color:var(--accent-color);">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2" style="margin-bottom:8px;">
                                                <circle cx="12" cy="12" r="10"></circle>
                                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                            </svg>
                                            <div style="font-weight:600;">View All Alerts</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Image Message -->
                                <div class="message-image" ng-if="msg.type === 'image' && msg.imageUrl">
                                    <img ng-src="{{ msg.imageUrl }}" alt="Chat Attachment"
                                        ng-click="openMediaModal(msg.imageUrl, 'image')">
                                </div>

                                <!-- Video Message -->
                                <div class="message-video" ng-if="msg.type === 'video'"
                                    ng-click="openMediaModal(msg.videoUrl, 'video')">
                                    <div class="video-thumbnail-container">
                                        <div class="video-overlay-icon">
                                            <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor"
                                                stroke="none">
                                                <path d="M8 5v14l11-7z" />
                                            </svg>
                                        </div>
                                        <!-- Placeholder or Thumbnail -->
                                        <div class="video-placeholder"
                                            style="width:100%; height:150px; background:#000; border-radius:8px; display:flex; align-items:center; justify-content:center; position: relative; overflow: hidden;">
                                            <img ng-if="msg.thumbnailUrl" ng-src="{{msg.thumbnailUrl}}"
                                                style="width: 100%; height: 100%; object-fit: cover; opacity: 0.7;">
                                            <span ng-if="!msg.thumbnailUrl"
                                                style="color:var(--text-muted); font-size:12px;">Video
                                                Preview</span>
                                        </div>
                                    </div>
                                    <div class="video-caption" ng-if="msg.caption"
                                        style="font-size:12px; margin-top:4px; color:var(--text-secondary);">{{
                                        msg.caption }}</div>
                                </div>
                            </div>
                        </div>

                        <div class="typing-indicator" ng-if="isTyping">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>

                    <div class="suggestions-container" ng-if="!isTyping">
                        <div class="suggestion-chip" ng-repeat="chip in suggestions" ng-click="sendSuggestion(chip)">
                            {{ chip.label }}
                        </div>
                        <div class="suggestion-chip" ng-click="sendSuggestion({query: 'show me a video clip'})">
                            Show Video Demo
                        </div>
                    </div>

                    <div class="chat-input-area">
                        <div class="chat-input-wrapper">
                            <input type="text" class="chat-input" placeholder="Type your message..."
                                ng-model="userMessage" ng-keydown="handleKeyDown($event)">
                        </div>
                        <button class="btn-send" ng-click="sendMessage()" ng-disabled="!userMessage.trim()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="22" y1="2" x2="11" y2="13"></line>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Media Modal (Image & Video) -->
                <div class="image-modal-overlay" ng-class="{'active': showMediaModal}" ng-click="closeMediaModal()">
                    <div class="modal-close-btn" ng-click="closeMediaModal()">&times;</div>
                    <div class="image-modal-content" ng-click="$event.stopPropagation()">
                        <img ng-if="modalMediaType === 'image'" ng-src="{{ modalMediaUrl }}" alt="Full Screen View">
                        <video ng-if="modalMediaType === 'video'" ng-src="{{ modalMediaUrl }}" controls autoplay
                            style="max-width: 100%; max-height: 80vh; border-radius: 8px;"></video>
                    </div>
                </div>
            </div>

            <!-- Object Search View -->
            <!-- We keep the SearchController attached here so the filter logic still works -->
            <div class="object-search-page" ng-controller="SearchController" ng-show="activePage === 'search-object'"
                style="flex-direction: column;">

                <!-- Global Page Header (Tabs + Saved Searches) -->
                <div
                    style="padding: 16px 24px 0 24px; background-color: var(--bg-secondary); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: flex-end;">

                    <div class="object-tabs-wrapper" style="margin-bottom: 0; border-bottom: none; display: flex;">
                        <div class="object-tab" ng-repeat="category in options.categories track by $index"
                            ng-class="{'active': searchParams.category === category}"
                            ng-click="onCategoryChange(category)" style="font-size: 15px; padding: 12px 24px;">
                            {{ translations.search[getTranslationKey(category)] || category }}
                        </div>
                    </div>

                    <div class="saved-searches-header-container" style="padding-bottom: 8px;">
                        <div class="custom-select-container" ng-class="{'open': isSavedSearchesDropdownOpen}"
                            style="min-width: 220px;">
                            <div class="custom-select-header" ng-click="toggleSavedSearchesDropdown($event)"
                                style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);">
                                <span style="display: flex; align-items: center; gap: 8px; color: var(--accent-color);">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z">
                                        </path>
                                        <polyline points="17 21 17 13 7 13 7 21"></polyline>
                                        <polyline points="7 3 7 8 15 8"></polyline>
                                    </svg>
                                    {{ getSelectedSavedSearchText() }}
                                </span>
                                <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                            </div>
                            <div class="custom-select-dropdown dropdown-right" style="right: 0; left: auto;"
                                ng-click="$event.stopPropagation()">
                                <div class="camera-checkbox" ng-click="selectSavedSearch('')">
                                    <label>-- Start New Search --</label>
                                </div>
                                <div class="camera-checkbox" ng-repeat="s in options.savedSearches track by s.id"
                                    ng-click="selectSavedSearch(s.id)">
                                    <label>{{s.name}}</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="search-layout" style="flex: 1; min-height: 0;">
                    <!-- Left Panel: Search Form -->
                    <div class="search-form-panel" ng-class="{'collapsed': !isFilterPanelOpen}">
                        <div class="search-form-scroll-area">
                            <h3>{{ translations.search.search_filters || "Search Filters" }}</h3>

                            <!-- Saved Searches removed from here and moved to top right header -->
                            <!-- Removed Object Type Tabs (Moved to top of page) -->

                            <div class="form-group" ng-if="searchParams.category !== 'Protective Gear'">
                                <label>{{ translations.search.target_object || "Target Object" }}</label>
                                <select ng-model="searchParams.objectType">
                                    <option
                                        ng-repeat="obj in options.categoryObjects[searchParams.category] track by $index"
                                        value="{{obj}}">{{ translations.search[getTranslationKey(obj)] || obj }}
                                    </option>
                                </select>
                            </div>

                            <div class="form-group" ng-if="searchParams.objectType === 'Vehicle'">
                                <label>{{ translations.search.vehicle_type || "Vehicle Type" }}</label>
                                <select ng-model="searchParams.vehicleType">
                                    <option ng-repeat="type in options.vehicleTypes track by $index"
                                        value="{{type=== 'All Vehicles' ? '' : type}}">{{
                                        translations.search[getTranslationKey(type)] || type }}
                                    </option>
                                </select>
                            </div>

                            <div class="form-group"
                                ng-if="searchParams.objectType === 'Vehicle' || searchParams.objectType === 'License Plate'">
                                <label>{{ translations.search.license_plate_lpr || "License Plate (LPR)" }}</label>
                                <input type="text" ng-model="searchParams.licensePlate" class="form-control"
                                    placeholder="e.g. ABC 123">
                            </div>

                            <div class="form-group" ng-if="searchParams.objectType === 'Person'">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                                    <div>
                                        <label>{{ translations.search.gender || "Gender" }}</label>
                                        <select ng-model="searchParams.gender" style="width:100%">
                                            <option value="">Any</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label>{{ translations.search.age || "Age" }}</label>
                                        <select ng-model="searchParams.ageGroup" style="width:100%">
                                            <option value="">Any</option>
                                            <option value="Child">Child</option>
                                            <option value="Adult">Adult</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group" ng-if="searchParams.category === 'Protective Gear'">
                                <label>{{ translations.search.protective_gear_attrs || "Protective Gear Attributes"
                                    }}</label>
                                <div class="custom-select-container" ng-class="{'open': isPPEDropdownOpen}">
                                    <div class="custom-select-header" ng-click="togglePPEDropdown($event)">
                                        <span>{{ getSelectedPPEText() }}</span>
                                        <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24"
                                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                    <div class="custom-select-dropdown" ng-click="$event.stopPropagation()">
                                        <div class="camera-checkbox">
                                            <label><input type="checkbox" ng-model="searchParams.ppeAttributes.helmet">
                                                Helmet</label>
                                        </div>
                                        <div class="camera-checkbox">
                                            <label><input type="checkbox"
                                                    ng-model="searchParams.ppeAttributes.safetyVest"> Safety
                                                Vest</label>
                                        </div>
                                        <div class="camera-checkbox">
                                            <label><input type="checkbox" ng-model="searchParams.ppeAttributes.hardhat">
                                                Hardhat</label>
                                        </div>
                                        <div class="camera-checkbox">
                                            <label><input type="checkbox" ng-model="searchParams.ppeAttributes.mask">
                                                Mask</label>
                                        </div>
                                        <div class="camera-checkbox">
                                            <label><input type="checkbox"
                                                    ng-model="searchParams.ppeAttributes.respirator"> Respirator</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group"
                                ng-show="searchParams.category !== 'Person' && searchParams.category !== 'Dangerous Goods'">
                                <label>{{ translations.search.color || "Color" }}</label>
                                <div class="color-picker">
                                    <div class="color-swatch-wrapper" ng-repeat="color in options.colors"
                                        ng-class="{'selected': searchParams.color === color.name}"
                                        ng-click="setSearchColor(color.name)" title="{{color.name}}">
                                        <div class="color-swatch" ng-style="{'background-color': color.hex}"></div>
                                    </div>
                                    <!-- Custom Color Option -->
                                    <div class="color-swatch-wrapper custom-color-wrapper"
                                        ng-class="{'selected': isCustomColorSelected()}" title="Custom Color">
                                        <div class="color-swatch custom-color-btn"
                                            style="background: conic-gradient(red, yellow, lime, aqua, blue, magenta, red); display: flex; align-items: center; justify-content: center; position: relative;">
                                            <input type="color" ng-model="searchParams.customColorHex"
                                                ng-change="onCustomColorChange()"
                                                style="opacity: 0; position: absolute; inset: 0; width: 100%; height: 100%; cursor: pointer;">
                                        </div>
                                    </div>
                                    <div class="color-clear" ng-if="searchParams.color" ng-click="clearColor()">Clear
                                    </div>
                                </div>
                            </div>

                            <div class="form-group" ng-if="searchParams.objectType === 'Person'">
                                <label>{{ translations.search.attributes || "Attributes" }}</label>
                                <div class="custom-select-container" ng-class="{'open': isAttributesDropdownOpen}">
                                    <div class="custom-select-header" ng-click="toggleAttributesDropdown($event)">
                                        <span>{{ getSelectedAttributesText() }}</span>
                                        <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24"
                                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                    <div class="custom-select-dropdown" ng-click="$event.stopPropagation()">
                                        <div class="camera-checkbox">
                                            <label><input type="checkbox" ng-model="searchParams.attributes.hat">
                                                Hat</label>
                                        </div>
                                        <div class="camera-checkbox">
                                            <label><input type="checkbox" ng-model="searchParams.attributes.backpack">
                                                Backpack</label>
                                        </div>
                                        <div class="camera-checkbox">
                                            <label><input type="checkbox" ng-model="searchParams.attributes.glasses">
                                                Glasses</label>
                                        </div>
                                        <div class="camera-checkbox">
                                            <label><input type="checkbox" ng-model="searchParams.attributes.mask">
                                                Mask</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Cameras</label>
                                <div class="custom-select-container" ng-class="{'open': isCameraDropdownOpen}">
                                    <div class="custom-select-header" ng-click="toggleCameraDropdown($event)">
                                        <span>{{ getSelectedCamerasText() }}</span>
                                        <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24"
                                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <polyline points="6 9 12 15 18 9"></polyline>
                                        </svg>
                                    </div>
                                    <div class="custom-select-dropdown" ng-click="$event.stopPropagation()">
                                        <div class="camera-checkbox" ng-repeat="cam in availableCameras">
                                            <label>
                                                <input type="checkbox" ng-checked="isCameraSelected(cam.id)"
                                                    ng-click="toggleCameraSelection(cam.id)">
                                                {{cam.name}}
                                            </label>
                                        </div>
                                        <div ng-if="!availableCameras || availableCameras.length === 0"
                                            style="color:var(--text-muted); font-size: 13px; padding: 12px; text-align: center;">
                                            No cameras available.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Time Range</label>
                                <select ng-model="searchParams.timeRange"
                                    ng-options="t.val as t.label for t in options.timeRanges"></select>
                            </div>

                            <div class="form-group custom-time-inputs" ng-show="searchParams.timeRange === 'custom'"
                                style="display: flex; gap: 8px; flex-direction: column;">
                                <input type="datetime-local" ng-model="searchParams.customStart" class="form-control"
                                    style="padding: 10px; border-radius: 8px; border: 1px solid var(--border-color); background-color: var(--bg-secondary); color: var(--text-primary);"
                                    placeholder="Start Time">
                                <input type="datetime-local" ng-model="searchParams.customEnd" class="form-control"
                                    style="padding: 10px; border-radius: 8px; border: 1px solid var(--border-color); background-color: var(--bg-secondary); color: var(--text-primary);"
                                    placeholder="End Time">
                            </div>

                            <!-- Behavior Analytics -->
                            <div class="form-group"
                                style="margin-top: 12px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.05);">
                                <label>Speed / Pace</label>
                                <select ng-model="searchParams.speed">
                                    <option value="">Any Pace</option>
                                    <option value="Stationary">Stationary</option>
                                    <option value="Normal">Normal (Walking/Cruising)</option>
                                    <option value="Fast">Fast (Running/Speeding)</option>
                                </select>
                            </div>

                            <div class="form-group" style="margin-top: 8px;">
                                <label style="display:flex; justify-content:space-between; align-items:center;">
                                    <span>Loitering / Dwell Time</span>
                                    <span
                                        style="color:var(--accent-color); font-weight:600;">{{searchParams.dwellTimeFormatted}}</span>
                                </label>
                                <input type="range" min="0" max="100" ng-model="searchParams.dwellTimeSlider"
                                    ng-change="updateDwellTime()" class="form-control"
                                    title="Drag to set minimum dwell time before object is captured"
                                    style="padding: 0; height: 4px; border-radius: 4px; accent-color: var(--accent-color); cursor: pointer; margin-top: 4px;">
                                <div
                                    style="display:flex; justify-content:space-between; font-size:10px; color:var(--text-muted); margin-top: 4px;">
                                    <span>Any</span>
                                    <span>7 Days</span>
                                </div>
                            </div>



                        </div> <!-- End search-form-scroll-area -->

                        <div class="form-actions">
                            <button class="btn btn-secondary" ng-click="resetSearch()">Reset</button>
                            <button class="btn btn-primary" ng-click="executeSearch()"
                                ng-disabled="isSearching">{{isSearching ? 'Searching...' : 'Search'}}</button>
                        </div>
                    </div> <!-- End search-form-panel -->

                    <!-- Right Panel: Results Grid -->
                    <div class="search-results-panel">
                        <div class="results-header-container"
                            style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px;">
                            <button class="btn-toggle-filters" ng-click="toggleFilterPanel()"
                                ng-class="{'active': isFilterPanelOpen}" title="Toggle Filters">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                                </svg>
                                <span>Filters</span>
                            </button>

                            <div class="results-header" ng-if="searchResults" style="margin: 0;">
                                <h3 style="margin: 0;">{{searchResults.length}} Results Found</h3>
                            </div>
                        </div>

                        <div class="results-empty" ng-if="!searchResults && !isSearching">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                            <h4>Ready to Search</h4>
                            <p>Select your filters and click Search to find objects.</p>
                        </div>

                        <div class="results-loading" ng-if="isSearching">
                            <div class="spinner"></div>
                            <p>Analyzing video metadata...</p>
                        </div>

                        <div class="results-grid" ng-if="searchResults && !isSearching">
                            <div class="result-card" ng-repeat="res in searchResults" ng-click="openResultVideo(res)">
                                <div class="result-thumbnail">
                                    <img ng-if="res.thumbnailUrl" ng-src="{{res.thumbnailUrl}}"
                                        style="width: 100%; height: 100%; object-fit: cover;"
                                        onerror="this.onerror=null; this.src=''; this.style.backgroundColor='#333';">
                                    <div class="thumbnail-placeholder" ng-if="!res.thumbnailUrl">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                            <polyline points="21 15 16 10 5 21"></polyline>
                                        </svg>
                                    </div>
                                    <div class="result-confidence"
                                        ng-class="{'high': res.confidence > 90, 'medium': res.confidence <= 90}">
                                        {{res.confidence}}% Match
                                    </div>
                                </div>
                                <div class="result-details">
                                    <div class="result-tag">{{res.tag}}</div>
                                    <div class="result-cam">{{res.cameraName}}</div>
                                    <div
                                        style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                                        <div class="result-time">{{res.timestamp | date:'short'}}</div>
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2" class="play-icon"
                                            style="color:var(--accent-color); opacity: 0.8; transition: transform 0.2s;">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <polygon points="10 8 16 12 10 16 10 8"></polygon>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- End Object Search View -->



        </main>
    </div>







    <script src="js/vms-app.js"></script>
    <script src="js/kafka-service.js"></script>
    <script src="js/dashboard-controller.js"></script>
    <script src="js/cameras-controller.js"></script>
    <script src="js/alerts-controller.js"></script>
    <script src="js/multiview-controller.js"></script>
    <script src="js/camera-issue-controller.js"></script>
    <script src="js/alert-details-controller.js"></script>
    <script src="js/settings-controller.js"></script>
    <script src="js/profile-controller.js"></script>
    <script src="js/search-controller.js"></script>
    <script src="js/nura-ai-controller.js"></script>
</body>

</html>


</body>

</html>